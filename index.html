
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard de Salud - HealthConnect</title>
        <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
        
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
            color: #c9d1d9;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5em;
            color: #58a6ff;
            margin-bottom: 10px;
        }
        
        h2 {
            color: #58a6ff;
            margin: 30px 0 20px 0;
            font-size: 1.8em;
        }
        
        h3 {
            color: #79c0ff;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .subtitle {
            color: #8b949e;
            font-size: 1.1em;
        }
        
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        /* HEALTHSPAN INDEX - HERO CARD */
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        
        .healthspan-hero {
            background: linear-gradient(135deg, #1a3a52 0%, #2d5a7b 100%);
            border: 2px solid #58a6ff;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(88, 166, 255, 0.4);
        }
        
        .healthspan-title {
            text-align: center;
            font-size: 1.5em;
            color: #79c0ff;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }
        
        .healthspan-main-score {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .healthspan-value {
            font-size: 5em;
            font-weight: bold;
        }
        
        .healthspan-status {
            font-size: 1.3em;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .healthspan-subscores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .subscore-card {
            background: rgba(22, 27, 34, 0.6);
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .subscore-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .subscore-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .subscore-bar {
            height: 6px;
            background: #161b22;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .subscore-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .subscore-description {
            color: #6e7681;
            font-size: 0.75em;
            margin-top: 10px;
            line-height: 1.3;
            font-style: italic;
        }
        
        .healthspan-description {
            color: #8b949e;
            font-size: 0.85em;
            margin-top: 5px;
            text-align: center;
            font-style: italic;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.3);
        }
        
        .metric-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-detail {
            color: #8b949e;
            font-size: 0.9em;
        }
        
        .charts-section {
            margin: 40px 0;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
        }
        
        .chart-container {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }
        
        .chart-empty {
            color: #8b949e;
            text-align: center;
            padding: 40px;
            font-style: italic;
        }
        
        .training-section, .recommendations-section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #30363d;
        }
        
        th {
            color: #58a6ff;
            font-weight: 600;
        }
        
        tr:hover {
            background: #0d1117;
        }
        
        .recommendations-list {
            list-style: none;
            padding: 0;
        }
        
        .recommendations-list li {
            padding: 12px;
            margin: 10px 0;
            background: #0d1117;
            border-left: 3px solid #58a6ff;
            border-radius: 4px;
        }
        
        .laboratorio-section {
            background: #161b22;
            border: 2px solid #58a6ff;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .score-card {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .score-main {
            grid-column: 1 / -1;
            border: 2px solid #58a6ff;
        }
        
        .score-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .score-value {
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .alertas-section {
            margin-top: 30px;
        }
        
        .alerta-item {
            background: #0d1117;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
        }
        
        @media (max-width: 768px) {
            .healthspan-value {
                font-size: 3.5em;
            }
            .healthspan-subscores {
                grid-template-columns: 1fr 1fr;
            }
            .charts-grid {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 1.8em;
            }
        }
        
        /* ESTILOS PARA SECCI√ìN DE LOGS */
        .logs-section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .logs-summary {
            background: #0d1117;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .logs-summary p {
            margin: 8px 0;
            font-size: 1.05em;
        }
        
        .logs-toggle-btn {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: background 0.2s;
        }
        
        .logs-toggle-btn:hover {
            background: #2ea043;
        }
        
        .logs-toggle-btn.expanded {
            background: #da3633;
        }
        
        #logs-content {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px;
            max-height: 500px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #c9d1d9;
        }
        
        .logs-hidden {
            display: none;
        }
        
        .log-info { color: #58a6ff; }
        .log-warning { color: #d29922; }
        .log-error { color: #f85149; }
        .log-success { color: #3fb950; }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        /* NUTRITION CARDS */
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        
        .nutrition-section {
            background: linear-gradient(135deg, #2d1b3d 0%, #3d2b4d 100%);
            border: 2px solid #b392f0;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .nutrition-section h2 {
            color: #d2a8ff;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .nutrition-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid #b392f0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .nutrition-card h3 {
            color: #d2a8ff;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        
        .macro-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .macro-label {
            min-width: 120px;
            color: #c9d1d9;
            font-size: 0.95em;
        }
        
        .macro-value {
            margin-left: auto;
            color: #d2a8ff;
            font-weight: bold;
        }
        
        .deficit-positive {
            color: #3fb950 !important;
        }
        
        .deficit-negative {
            color: #f85149 !important;
        }
        
        .deficit-neutral {
            color: #ffa657 !important;
        }
    </style>
    
        
        <script>
        async function actualizar() {
        ¬† ¬† const msg = document.getElementById('msg');
        ¬† ¬† msg.textContent = '‚è≥ Actualizando...';
        ¬† ¬†¬†
        ¬† ¬† try {
        ¬† ¬† ¬† ¬† // --- ESTA ES LA L√çNEA CORREGIDA ---
        ¬† ¬† ¬† ¬† const res = await fetch('/actualizar', {method: 'POST'});
        ¬† ¬† ¬† ¬† // -------------------------------
        
        ¬† ¬† ¬† ¬† if (res.ok) {
        ¬† ¬† ¬† ¬† ¬† ¬† msg.textContent = '‚úÖ OK';
        ¬† ¬† ¬† ¬† ¬† ¬† setTimeout(() => location.reload(), 2000);
        ¬† ¬† ¬† ¬† } else {
        ¬† ¬† ¬† ¬† ¬† ¬† msg.textContent = '‚ùå Error';
        ¬† ¬† ¬† ¬† }
        ¬† ¬† } catch (e) {
        ¬† ¬† ¬† ¬† msg.textContent = '‚ùå ' + e.message;
        ¬† ¬† }
        }
        </script>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>Dashboard de Salud</h1>
                <p class="subtitle">√öltima actualizaci√≥n: 24/01/2026 04:45 (Argentina)</p>
                
                <button onclick="actualizar()" style="background:#3fb950;color:white;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;margin-left:20px;">
                ¬† ¬† üîÑ Actualizar
                </button>
                <span id="msg" style="margin-left:10px;"></span>
                
            </header>
            
            
    <div class="healthspan-hero">
        <div class="healthspan-title">üèÜ HEALTHSPAN INDEX</div>
        <div class="healthspan-main-score">
            <div class="healthspan-value" style="color: #58a6ff;">82</div>
            <div class="healthspan-status" style="color: #58a6ff;">BUENO</div>
            <div class="healthspan-description">Indicador de a√±os de vida saludable basado en fitness, composici√≥n corporal y recuperaci√≥n (ventana 7 d√≠as)</div>
        </div>
        
        <div class="healthspan-subscores">
            <div class="subscore-card">
                <div class="subscore-label">üí™ FITNESS</div>
                <div class="subscore-value" style="color: #3fb950;">95</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 95%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">PAI semanal + balance entrenamiento (TSB) + capacidad aer√≥bica (VO2max)</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üèãÔ∏è BODY</div>
                <div class="subscore-value" style="color: #f85149;">45</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 45%; background: #f85149;"></div>
                </div>
                <div class="subscore-description">Peso, grasa corporal y masa muscular vs objetivos (promedio 7d)</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üò¥ RECOVERY</div>
                <div class="subscore-value" style="color: #3fb950;">95</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 95%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">Calidad de sue√±o + frecuencia card√≠aca en reposo + saturaci√≥n de ox√≠geno</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üî• METABOLIC</div>
                <div class="subscore-value" style="color: #d29922;">80</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 80%; background: #d29922;"></div>
                </div>
                <div class="subscore-description">Presi√≥n arterial + biomarcadores de salud metab√≥lica</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">‚ö° FUNCTIONAL</div>
                <div class="subscore-value" style="color: #3fb950;">100</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 100%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">Pasos diarios y movilidad funcional (promedio 7d)</div>
            </div>
        </div>
    </div>
    
            
            
    <div class="laboratorio-section">
        <h2>üß¨ Dashboard Cient√≠fico</h2>
        <div class="scores-grid">
            <div class="score-card score-main">
                <div class="score-label">Longevity Score</div>
                <div class="score-value" style="color: #3fb950;">85.5/100</div>
                <div class="subscore-description">Puntuaci√≥n general de salud basada en an√°lisis de laboratorio (biomarcadores sangu√≠neos)</div>
            </div>
            <div class="score-card">
                <div class="score-label">CardioScore</div>
                <div class="score-value" style="color: #3fb950;">90.0</div>
                <div class="subscore-description">Colesterol total, HDL, LDL, triglic√©ridos y homociste√≠na</div>
            </div>
            <div class="score-card">
                <div class="score-label">MetabolicScore</div>
                <div class="score-value" style="color: #d29922;">65.0</div>
                <div class="subscore-description">Glucosa, HbA1c, insulina y marcadores de resistencia insul√≠nica</div>
            </div>
            <div class="score-card">
                <div class="score-label">InflammationScore</div>
                <div class="score-value" style="color: #3fb950;">100.0</div>
                <div class="subscore-description">Prote√≠na C reactiva, ferritina y otros marcadores inflamatorios</div>
            </div>
            <div class="score-card">
                <div class="score-label">HormoneScore</div>
                <div class="score-value" style="color: #3fb950;">100.0</div>
                <div class="subscore-description">Testosterona, vitamina D, hormonas tiroideas y cortisol</div>
            </div>
        </div>
        <div class="alertas-section">
            <h3>‚ö†Ô∏è Alertas</h3>
            
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">‚ö†Ô∏è Glucemias en Rango Pre-diab√©tico</div>
            <div style="color: #c9d1d9; margin-top: 5px;">Promedio de glucemias √∫ltimos 90 d√≠as: 102.1 mg/dL (objetivo: <100). Control gluc√©mico sub√≥ptimo.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Actualizar: HbA1c</div>
            <div style="color: #c9d1d9; margin-top: 5px;">Tu √∫ltimo an√°lisis de HbA1c tiene 16 meses (fecha: 2024-09-26). Se recomienda actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Vitamina D desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (20 meses). Considera actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Ferritina desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (20 meses). Considera actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê B12 desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (20 meses). Considera actualizar.</div>
        </div>
        
        </div>
    </div>
    
            
            
    <div style="background: linear-gradient(135deg, #1e3a5f 0%, #2d5a7b 100%); 
                border-radius: 12px; padding: 30px; margin: 30px 0; 
                border: 1px solid rgba(255,255,255,0.1);">
        
        <h2 style="color: #58a6ff; font-size: 24px; margin-bottom: 20px; display: flex; align-items: center;">
            üìã Plan de Implementaci√≥n
        </h2>
        
        <!-- Adherencia al Plan (7 d√≠as) -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                1. Adherencia al Plan (7 d√≠as)
            </h3>
            
            <!-- D√©ficit Cal√≥rico -->
            <div style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #8b949e;">üî• D√©ficit: D√≠as en d√©ficit cal√≥rico (>0 kcal)</span>
                    <span style="color: #3fb950; font-weight: bold;">
                        6/6 d√≠as (100%)
                    </span>
                </div>
                <div style="background: rgba(139, 148, 158, 0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #3fb950; height: 100%; width: 100.0%; transition: width 0.3s;"></div>
                </div>
            </div>
            
            <!-- Prote√≠na -->
            <div style="margin-bottom: 10px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #8b949e;">ü•© Prote√≠na: >160g (tu meta)</span>
                    <span style="color: #f85149; font-weight: bold;">
                        0/6 d√≠as (0%)
                    </span>
                </div>
                <div style="background: rgba(139, 148, 158, 0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #f85149; height: 100%; width: 0.0%; transition: width 0.3s;"></div>
                </div>
            </div>
            
            <!-- % Cumplimiento -->
            <div style="margin-top: 15px; padding: 10px; background: rgba(88, 166, 255, 0.1); border-radius: 6px;">
                <span style="color: #58a6ff; font-size: 12px;">Calculado % d√≠as cumpliendo</span>
            </div>
        </div>
        
        <!-- Barra de Progreso -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                2. Barra de Progreso
            </h3>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div style="text-align: left;">
                    <div style="color: #8b949e; font-size: 11px;">PESO INICIAL</div>
                    <div style="color: #f85149; font-size: 18px; font-weight: bold;">83.0 kg</div>
                </div>
                <div style="text-align: center;">
                    <div style="color: #8b949e; font-size: 11px;">PESO ACTUAL</div>
                    <div style="color: #58a6ff; font-size: 18px; font-weight: bold;">84.1 kg</div>
                </div>
                <div style="text-align: right;">
                    <div style="color: #8b949e; font-size: 11px;">PESO META</div>
                    <div style="color: #3fb950; font-size: 18px; font-weight: bold;">79.0 kg</div>
                </div>
            </div>
            
            <!-- Barra de progreso -->
            <div style="background: rgba(139, 148, 158, 0.3); height: 20px; border-radius: 10px; overflow: hidden; margin-bottom: 10px;">
                <div style="background: linear-gradient(90deg, #3fb950 0%, #58a6ff 100%); height: 100%; width: -28.333346048991004%; transition: width 0.5s;"></div>
            </div>
            
            <div style="text-align: center; color: #c9d1d9; font-size: 14px;">
                % progreso = (-1.1 kg perdidos / 4.0 kg total) = -28.3%
            </div>
        </div>
        
        <!-- Alertas Din√°micas -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                3. Alertas Din√°micas
            </h3>
    
            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; 
                        margin-bottom: 10px; border-left: 4px solid #3fb950;">
                <div style="display: flex; align-items: start; gap: 10px;">
                    <span style="font-size: 24px;">‚úÖ</span>
                    <div>
                        <div style="color: #c9d1d9; font-weight: bold; margin-bottom: 5px;">
                            PAI Excelente
                        </div>
                        <div style="color: #8b949e; font-size: 14px;">
                            PAI: 230/100. ¬°Mant√©n este nivel de actividad!
                        </div>
                    </div>
                </div>
            </div>
        
            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; 
                        margin-bottom: 10px; border-left: 4px solid #f85149;">
                <div style="display: flex; align-items: start; gap: 10px;">
                    <span style="font-size: 24px;">ü•©</span>
                    <div>
                        <div style="color: #c9d1d9; font-weight: bold; margin-bottom: 5px;">
                            Prote√≠na Baja 3 D√≠as Seguidos
                        </div>
                        <div style="color: #8b949e; font-size: 14px;">
                            Riesgo de p√©rdida muscular. Meta: 160g/d√≠a. Agrega 1 snack proteico.
                        </div>
                    </div>
                </div>
            </div>
        
        </div>
        
        <!-- Predicci√≥n -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                4. Predicci√≥n
            </h3>
    
            <div style="color: #8b949e; text-align: center; padding: 20px;">
                Necesitas m√°s datos para generar predicciones (m√≠nimo 50g/semana de cambio)
            </div>
        
        </div>
    </div>
    
            
            <div class="metrics-grid">
                <div class="metric-card"><div class="metric-label">PAI Semanal</div><div class="metric-value" style="color: #3fb950;">230</div><div class="metric-detail">√ìptimo (Objetivo: 100)</div></div><div class="metric-card"><div class="metric-label">Peso Actual</div><div class="metric-value" style="color: #f85149;">84.1 kg</div><div class="metric-detail">Lejos (+5.1 kg)</div></div><div class="metric-card"><div class="metric-label">VO2max (Medido)</div><div class="metric-value" style="color: #d29922;">38.3</div><div class="metric-detail">Bueno</div></div><div class="metric-card"><div class="metric-label">TSB Actual</div><div class="metric-value" style="color: #3fb950;">-8.4</div><div class="metric-detail">Forma √≥ptima</div><div class="metric-detail" style="font-size: 0.8em; color: #8b949e;">CTL: 34.9 | ATL: 43.2</div></div><div class="metric-card"><div class="metric-label">Sue√±o (7 d√≠as)</div><div class="metric-value" style="color: #3fb950;">8.3h</div><div class="metric-detail">√ìptimo</div></div><div class="metric-card"><div class="metric-label">SpO2 (7 d√≠as)</div><div class="metric-value" style="color: #3fb950;">97.7%</div><div class="metric-detail">Normal</div></div><div class="metric-card"><div class="metric-label">Grasa Corporal</div><div class="metric-value" style="color: #d29922;">22.0%</div><div class="metric-detail">Normal</div></div><div class="metric-card"><div class="metric-label">Masa Muscular</div><div class="metric-value" style="color: #d29922;">60.8 kg</div></div><div class="metric-card"><div class="metric-label">FC Reposo (7d)</div><div class="metric-value" style="color: #3fb950;">57 bpm</div><div class="metric-detail">Excelente</div></div><div class="metric-card"><div class="metric-label">Pasos (7d)</div><div class="metric-value" style="color: #3fb950;">17,171</div><div class="metric-detail">Excelente</div></div><div class="metric-card"><div class="metric-label">Presi√≥n (7d)</div><div class="metric-value" style="color: #d29922;">122/76</div><div class="metric-detail">Elevada</div></div>
    <div class="metric-card">
        <div class="metric-label">ü©∏ Glucemia (7d)</div>
        <div class="metric-value" style="color: #3fb950; font-size: 1.5em;">98</div>
        <div class="metric-detail" style="color: #3fb950; font-weight: 600;">Ayunas</div>
        <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(139, 148, 158, 0.2);">
            <div class="metric-value" style="color: #3fb950; font-size: 1.3em;">119</div>
            <div class="metric-detail" style="color: #3fb950; font-weight: 600;">Postprandial</div>
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">HbA1c Estimada (90d)</div>
        <div class="metric-value" style="color: #3fb950;">5.2%</div>
        <div class="metric-detail" style="color: #3fb950; font-weight: 600;">Normal</div>
        <div class="metric-detail" style="font-size: 0.8em; color: #8b949e; margin-top: 5px;">
            Gluc. prom: 102.1 mg/dL
        </div>
    </div>
    <div class="metric-card"><div class="metric-label">Score Longevidad</div><div class="metric-value" style="color: #3fb950;">90/100</div><div class="metric-detail">Excelente</div></div>
            </div>
            
            <div class="charts-section">
                <h2>Evoluci√≥n Temporal</h2>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>PAI (Diario + Ventana M√≥vil 7 d√≠as)</h3>
                        <div id="pai-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Peso</h3>
                        <div id="peso-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>TSB + CTL + ATL</h3>
                        <div id="tsb-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>SpO2</h3>
                        <div id="spo2-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Grasa Corporal</h3>
                        <div id="grasa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa Muscular</h3>
                        <div id="masa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>FC en Reposo (Nocturna)</h3>
                        <div id="fc-reposo-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>FC Diurna (Continua)</h3>
                        <div id="fc-diurna-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Pasos Diarios</h3>
                        <div id="pasos-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Presi√≥n Arterial</h3>
                        <div id="presion-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Glucosa en Sangre</h3>
                        <div id="glucosa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa √ìsea</h3>
                        <div id="masa-osea-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa de Agua Corporal</h3>
                        <div id="masa-agua-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Tasa Metab√≥lica Basal</h3>
                        <div id="tmb-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Distancia Recorrida</h3>
                        <div id="distancia-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Calor√≠as Totales</h3>
                        <div id="calorias-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Sue√±o por Fases (√∫ltimos 14 d√≠as)</h3>
                        <div id="sueno-chart"></div>
                    </div>
                </div>
            </div>
            
            
    <h2 style="margin-top: 40px; margin-bottom: 20px; color: #d2a8ff;">üçΩÔ∏è Nutrici√≥n y Balance</h2>

    <div class="metrics-grid">
        
        <div class="nutrition-card">
            <h3>üìä Balance Diario</h3>
            <div style="position: relative; width: 100%; display: flex; justify-content: center; margin-bottom: 15px;">
                <div style="position: relative; width: 70%; aspect-ratio: 1; max-height: 200px;">
                    <canvas id="circulo-calorias"></canvas>
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events: none; width: 100%;">
                        <div id="restante-valor" style="font-size: 1.8em; font-weight: bold; color: #3fb950;">1700</div>
                        <div style="font-size: 0.7em; color: #8b949e;">Restante</div>
                    </div>
                </div>
            </div>
            
            <div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.85em;">
                    <span style="color: #8b949e;"><span style="color: #ff6384;">‚óè</span> Comido</span>
                    <span id="comido-valor" style="color: #ff6384; font-weight: bold;">0</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.85em;">
                    <span style="color: #8b949e;"><span style="color: #10b981;">‚óè</span> Ejercicio</span>
                    <span id="ejercicio-valor" style="color: #10b981; font-weight: bold;">0</span>
                </div>

                <div style="display: flex; justify-content: space-between; padding-top: 0.5rem; border-top: 1px solid rgba(139, 148, 158, 0.2); margin-bottom: 0.5rem; font-size: 0.85em;">
                    <span style="color: #8b949e;">Meta de ingesta:</span>
                    <span id="presupuesto-valor" style="color: #58a6ff; font-weight: bold;">1700</span>
                </div>

                <div style="text-align: center; margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.2); border-radius: 4px;">
                    <small style="color: #3fb950; font-weight: 600;">‚úÖ D√©ficit</small>
                </div>
            </div>
        </div>
        
        <div class="nutrition-card" style="display: flex; flex-direction: column; justify-content: space-between;">
            <h3>üß™ Macros Hoy</h3>
            
            <div style="display: flex; justify-content: space-around; align-items: flex-start; margin-bottom: 10px;">
                
                <div style="width: 45%; text-align: center;">
                    <div style="position: relative; width: 100%; aspect-ratio: 1; max-height: 120px; margin: 0 auto;">
                        <canvas id="macro-carbohidratos"></canvas>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none;">
                            <div id="carbohidratos-pct" style="font-size: 0.8em; font-weight: bold; color: #3b82f6;">0%</div>
                        </div>
                    </div>
                    <div style="margin-top: 5px; color: #8b949e; font-size: 0.75em;">Carbs</div>
                    <div id="carbohidratos-g" style="color: #c9d1d9; font-weight: bold; font-size: 0.8em;">0g</div>
                </div>

                <div style="width: 45%; text-align: center;">
                    <div style="position: relative; width: 100%; aspect-ratio: 1; max-height: 120px; margin: 0 auto;">
                        <canvas id="macro-grasas"></canvas>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none;">
                            <div id="grasas-pct" style="font-size: 0.8em; font-weight: bold; color: #f59e0b;">0%</div>
                        </div>
                    </div>
                    <div style="margin-top: 5px; color: #8b949e; font-size: 0.75em;">Grasas</div>
                    <div id="grasas-g" style="color: #c9d1d9; font-weight: bold; font-size: 0.8em;">0g</div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: center;">
                <div style="width: 55%; text-align: center;">
                    <div style="position: relative; width: 100%; aspect-ratio: 1; max-height: 140px; margin: 0 auto;">
                        <canvas id="macro-proteinas"></canvas>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none;">
                            <div id="proteinas-pct" style="font-size: 0.9em; font-weight: bold; color: #a855f7;">0%</div>
                        </div>
                    </div>
                    <div style="margin-top: 5px; color: #8b949e; font-size: 0.8em;">Prot</div>
                    <div id="proteinas-g" style="color: #c9d1d9; font-weight: bold; font-size: 0.9em;">0g</div>
                </div>
            </div>
        </div>
        
        <div class="nutrition-card">
            <h3>‚öñÔ∏è Adherencia (7d)</h3>
            <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-top: 1rem; width: 100%;">
                
                <div style="text-align: center; width: 100%;">
                    <div style="position: relative; width: 60%; margin: 0 auto; aspect-ratio: 1; max-height: 140px;">
                        <canvas id="macros-recomendados"></canvas>
                    </div>
                    <div style="margin-top: 0.5rem; color: #8b949e; font-size: 0.9em;">Meta</div>
                </div>
                
                <div style="text-align: center; width: 100%;">
                    <div style="position: relative; width: 60%; margin: 0 auto; aspect-ratio: 1; max-height: 140px;">
                        <canvas id="macros-reales"></canvas>
                    </div>
                    <div style="margin-top: 0.5rem; color: #8b949e; font-size: 0.9em;">Real</div>
                </div>
            </div>
            
            <div style="margin-top: 1rem; text-align: center; font-size: 0.75em; color: #8b949e; border-top: 1px solid rgba(139, 148, 158, 0.1); padding-top: 0.8rem;">
                <span style="color: #3b82f6;">‚óè</span> Carb: <strong>42%</strong>
                <span style="color: #a855f7; margin-left: 8px;">‚óè</span> Prot: <strong>18%</strong>
                <span style="color: #f59e0b; margin-left: 8px;">‚óè</span> Grasa: <strong>40%</strong>
            </div>
        </div>
    </div>
    
    <div class="nutrition-card" style="margin-top: 20px;">
        <h3>üìâ Hist√≥rico (14d)</h3>
        <div style="position: relative; height: 22rem; width: 100%;">
            <canvas id="presupuesto-consumo-chart"></canvas>
        </div>
    </div>
    
            
            <div class="training-section">
                <h2>Entrenamientos Recientes</h2>
                
    <table>
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Duraci√≥n</th>
                <th>FC Prom</th>
                <th>PAI</th>
                <th>Zona</th>
            </tr>
        </thead>
        <tbody>
            
        <tr>
            <td>23/01 23:02</td>
            <td>Walking</td>
            <td>52 min</td>
            <td>128</td>
            <td style="color: #3fb950; font-weight: bold;">29.7</td>
            <td>Umbral</td>
        </tr>
        
        <tr>
            <td>23/01 17:44</td>
            <td>Swimming</td>
            <td>76 min</td>
            <td>106</td>
            <td style="color: #3fb950; font-weight: bold;">21.2</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>22/01 17:00</td>
            <td>Walking</td>
            <td>22 min</td>
            <td>106</td>
            <td style="color: #d29922; font-weight: bold;">6.1</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>22/01 16:17</td>
            <td>Walking</td>
            <td>8 min</td>
            <td>109</td>
            <td style="color: #f85149; font-weight: bold;">2.5</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>22/01 14:49</td>
            <td>Swimming</td>
            <td>68 min</td>
            <td>116</td>
            <td style="color: #3fb950; font-weight: bold;">27.1</td>
            <td>Tempo</td>
        </tr>
        
        <tr>
            <td>22/01 13:58</td>
            <td>Walking</td>
            <td>37 min</td>
            <td>108</td>
            <td style="color: #3fb950; font-weight: bold;">11.1</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>22/01 12:51</td>
            <td>Walking</td>
            <td>8 min</td>
            <td>97</td>
            <td style="color: #f85149; font-weight: bold;">1.5</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>21/01 19:43</td>
            <td>Walking</td>
            <td>37 min</td>
            <td>107</td>
            <td style="color: #3fb950; font-weight: bold;">10.7</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>21/01 18:45</td>
            <td>Walking</td>
            <td>50 min</td>
            <td>107</td>
            <td style="color: #3fb950; font-weight: bold;">14.5</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>21/01 18:08</td>
            <td>Walking</td>
            <td>8 min</td>
            <td>108</td>
            <td style="color: #f85149; font-weight: bold;">2.4</td>
            <td>Aer√≥bico</td>
        </tr>
        
        </tbody>
    </table>
    
            </div>
            
            <div class="recommendations-section">
                <h2>Recomendaciones</h2>
                
    <ul class="recommendations-list">
        <li>üéØ Reducir 5.1 kg para peso objetivo</li>
    </ul>
    
            </div>
            
            
    <div class="logs-section">
        <h2>üìã √öltima Ejecuci√≥n</h2>
        <div class="logs-summary">
            <p>‚úÖ <strong>Fecha:</strong> 2026-01-24 04:45:23 (ARG)</p>
            <p>‚úÖ <strong>Archivos procesados:</strong> 0</p>
            <p>‚úÖ <strong>Total ejercicios:</strong> 300</p>
            <p>‚úÖ <strong>Total registros peso:</strong> 94</p>
            <p>‚úÖ <strong>Total registros pasos:</strong> 1846</p>
            <p style='color: #8b949e; font-size: 0.9em;'>üìÑ Log file: 2344 bytes</p>
            <button id="logs-toggle-btn" class="logs-toggle-btn" onclick="toggleLogs()">‚ñº Ver logs completos (√∫ltimas 500 l√≠neas)</button>
        </div>
        <pre id="logs-content" class="logs-hidden">2026-01-24 04:45:23,322 [INFO] - 
2026-01-24 04:45:23,322 [INFO] - ================================================================================
2026-01-24 04:45:23,322 [INFO] - MONITOR DE LONGEVIDAD v4.0 - SIN LOOP DE CRON
2026-01-24 04:45:23,322 [INFO] - ================================================================================
2026-01-24 04:45:23,322 [INFO] - Configuraci√≥n: SIN LIMPIEZA - datos limpios desde origen
2026-01-24 04:45:23,322 [INFO] - Ejecuci√≥n: Un ciclo, controlado por Crontab de Ubuntu.
2026-01-24 04:45:23,322 [INFO] - ================================================================================
2026-01-24 04:45:23,322 [INFO] - 
2026-01-24 04:45:23,322 [INFO] - ================================================================================
2026-01-24 04:45:23,322 [INFO] - PROCESAMIENTO - Monitor de Longevidad v4.0 [REPORTE POR FUENTE]
2026-01-24 04:45:23,322 [INFO] - ================================================================================
2026-01-24 04:45:23,497 [INFO] - Cache cargado: /home/ubuntu/proyecto/cache_datos.json
2026-01-24 04:45:23,545 [INFO] - Total archivos JSON encontrados: 1900
2026-01-24 04:45:23,546 [INFO] - Archivos ya procesados: 1900
2026-01-24 04:45:23,546 [INFO] - Archivos nuevos a procesar: 0
2026-01-24 04:45:23,583 [INFO] - No hay archivos nuevos para procesar.
2026-01-24 04:45:23,583 [INFO] - Generando dashboard HTML con gr√°ficos...
2026-01-24 04:45:23,583 [INFO] - ==================================================
2026-01-24 04:45:23,583 [INFO] - C√ÅLCULO PAI SEMANAL - Fecha actual: 2026-01-24
2026-01-24 04:45:23,583 [INFO] - Ventana de 7 d√≠as: 2026-01-18 a 2026-01-24
2026-01-24 04:45:23,584 [INFO] - PAI TOTAL SEMANAL: 229.9
2026-01-24 04:45:23,584 [INFO] - Entrenamientos en ventana: 23
2026-01-24 04:45:23,584 [INFO] - ==================================================
2026-01-24 04:45:23,606 [INFO] - Laboratorio procesado: Longevity Score = 85.5/100
2026-01-24 04:45:23,711 [INFO] - üîç Calculando c√≠rculo para HOY: 2026-01-24
2026-01-24 04:45:23,711 [INFO] - üìä Total registros de nutrition en cache: 762
2026-01-24 04:45:23,715 [INFO] - ‚úÖ Registros de nutrition HOY: 0, Calor√≠as: 0
2026-01-24 04:45:23,720 [INFO] - ‚úÖ Ejercicio HOY: 0 kcal
2026-01-24 04:45:23,720 [INFO] - üìà RESULTADO: Presupuesto=1700, Comido=0, Restante=1700
</pre>
    </div>
    
        </div>
        
        <script>
            
        const layout_config = {
            paper_bgcolor: '#0d1117',
            plot_bgcolor: '#161b22',
            font: { color: '#c9d1d9' },
            margin: { l: 40, r: 20, t: 20, b: 40 },
            showlegend: true,
            height: 300
        };
    
        // PAI: Diario + Ventana M√≥vil 7 d√≠as
        const pai_diario = {
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-17', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [13.700000000000001, 34.7, 36.6, 53.60000000000001, 59.0, 10.8, 96.6, 51.7, 86.1, 77.9, 3.7, 53.4, 15.2, 62.099999999999994, 48.300000000000004, 50.9],
            type: 'bar',
            name: 'PAI Diario',
            marker: { color: '#58a6ff' }
        };
        
        const pai_ventana = {
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-17', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [13.700000000000001, 48.400000000000006, 85.0, 138.60000000000002, 197.60000000000002, 208.40000000000003, 305.0, 343.00000000000006, 394.4, 435.69999999999993, 385.7999999999999, 380.2, 384.59999999999997, 350.1, 346.7, 311.49999999999994],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ventana 7d',
            line: { color: '#f85149', width: 3 },
            marker: { size: 8 },
            yaxis: 'y2'
        };
        
        Plotly.newPlot('pai-chart', [pai_diario, pai_ventana], {
            ...layout_config,
            yaxis: { title: 'PAI Diario', gridcolor: '#30363d' },
            yaxis2: {
                title: 'PAI Acumulado 7d',
                overlaying: 'y',
                side: 'right',
                gridcolor: '#30363d'
            },
            xaxis: { gridcolor: '#30363d' },
            shapes: [{
                type: 'line',
                x0: 0, x1: 1, xref: 'paper',
                yref: 'y2',
                y0: 100, y1: 100,
                line: { color: '#3fb950', width: 2, dash: 'dot' }
            }]
        });
        
        // TSB + CTL + ATL
        const tsb_data = {
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-04', '2026-01-05', '2026-01-06', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23', '2026-01-24'],
            y: [2.6, 0.5, 1.5, 0.9, -0.0, 4.2, 7.8, 10.7, 13.1, 15.1, 16.7, 18.0, 19.0, 19.8, 20.4, 20.8, 19.2, 3.1, -2.6, -13.3, -20.8, -13.7, -7.7, -3.3, 1.1, -4.4, -2.5, -8.9, -11.9, -14.7, -8.4],
            type: 'scatter',
            mode: 'lines',
            name: 'TSB',
            fill: 'tozeroy',
            line: { color: '#ffa657', width: 2 }
        };
        
        const ctl_data = {
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-04', '2026-01-05', '2026-01-06', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23', '2026-01-24'],
            y: [35.3, 35.6, 35.4, 35.5, 35.6, 34.8, 34.0, 33.2, 32.4, 31.6, 30.8, 30.1, 29.4, 28.7, 28.0, 27.3, 27.1, 29.7, 30.8, 33.0, 34.9, 34.0, 33.2, 32.6, 31.8, 32.9, 32.6, 34.0, 34.8, 35.7, 34.9],
            type: 'scatter',
            mode: 'lines',
            name: 'CTL (Fitness)',
            line: { color: '#3fb950', width: 2 }
        };
        
        const atl_data = {
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-04', '2026-01-05', '2026-01-06', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23', '2026-01-24'],
            y: [32.7, 35.1, 33.9, 34.5, 35.7, 30.6, 26.2, 22.5, 19.2, 16.5, 14.1, 12.1, 10.4, 8.9, 7.6, 6.5, 7.8, 26.6, 33.4, 46.3, 55.7, 47.7, 40.9, 35.8, 30.7, 37.3, 35.1, 42.8, 46.7, 50.5, 43.2],
            type: 'scatter',
            mode: 'lines',
            name: 'ATL (Fatiga)',
            line: { color: '#f85149', width: 2 }
        };
        
        Plotly.newPlot('tsb-chart', [tsb_data, ctl_data, atl_data], {
            ...layout_config,
            yaxis: { title: 'Puntuaci√≥n', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        Plotly.newPlot('peso-chart', [
            
            {
                x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-07', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-18', '2025-12-19', '2025-12-20', '2025-12-21', '2025-12-22', '2025-12-23', '2025-12-25', '2025-12-28', '2026-01-07', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [83.12950000000001, 82.747, 82.5, 82.30000305175781, 82.19999694824219, 82.2, 82.0999984741211, 82.0999984741211, 82.5, 82.4, 82.0, 82.30000305175781, 81.69999694824219, 81.0999984741211, 81.5, 82.0, 81.69999694824219, 81.4000015258789, 81.4000015258789, 81.5, 81.19999694824219, 80.4000015258789, 79.80000305175781, 80.30000305175781, 81.30000305175781, 81.5999984741211, 81.5999984741211, 82.5, 81.9000015258789, 82.0999984741211, 82.0, 82.19999694824219, 82.0, 81.5999984741211, 82.0, 80.4, 82.5, 81.5999984741211, 81.80000305175781, 82.19999694824219, 81.5, 82.30000305175781, 83.25, 82.60000228881836, 83.0, 83.19999694824219, 83.30000305175781, 82.35000228881836, 81.69999694824219, 80.5999984741211, 81.63333384195964, 82.27999725341797, 81.4000015258789, 81.19999694824219, 83.5, 83.80000305175781, 84.8, 84.5, 82.80000305175781, 84.4000015258789, 82.0, 81.5999984741211, 81.69999694824219, 81.0, 81.70000076293945, 81.6999994913737, 81.63333129882812, 82.5999984741211, 84.9000015258789, 84.69999694824219, 83.19999694824219, 83.69999694824219, 83.4000015258789, 83.73999938964843, 84.13333384195964],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Peso',
                line: { color: '#f85149', width: 2 },
                marker: { size: 6 }
            }
        ,
            {
                x: ['2025-10-26', '2026-01-23'],
                y: [81.59393565867657, 83.00674266126856],
                type: 'scatter',
                mode: 'lines',
                name: 'Tendencia',
                line: { color: '#c9d1d9', width: 2, dash: 'dot' },
                hoverinfo: 'skip'
            }
            
        ], {
            ...layout_config,
            yaxis: { title: 'Peso (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            
            annotations: [{
                xref: 'paper', yref: 'paper',
                x: 0.05, y: 0.95,
                xanchor: 'left', yanchor: 'top',
                text: 'üìà Subiendo 0.11 kg/sem',
                showarrow: false,
                font: { color: '#c9d1d9', size: 13, weight: 'bold' },
                bgcolor: 'rgba(22, 27, 34, 0.8)',
                bordercolor: '#30363d',
                borderwidth: 1,
                borderpad: 6
            }],
            
            shapes: [{
                type: 'line',
                x0: 0, x1: 1, xref: 'paper',
                y0: 79.0, y1: 79.0,
                line: { color: '#3fb950', width: 1, dash: 'dot' }
            }]
        });
        
        Plotly.newPlot('grasa-chart', [
            
            {
                x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-07', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-18', '2025-12-19', '2025-12-20', '2025-12-21', '2025-12-23', '2025-12-25', '2025-12-28', '2026-01-07', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [24.200000762939453, 24.399999618530273, 24.799999237060547, 24.5, 22.899999618530273, 23.200000762939453, 23.600000381469727, 23.5, 23.377280712127686, 23.41082763671875, 24.10635757446289, 22.877029418945312, 25.75472068786621, 23.899999618530273, 24.20475959777832, 22.83807627360026, 24.242830276489258, 23.24108378092448, 25.728308995564777, 24.46794605255127, 23.87416394551595, 25.038327598571776, 22.85674508412679, 24.08571128845215, 24.748746236165363, 23.59832191467285, 22.899999618530273, 24.167378107706707, 22.645668029785156, 23.609882990519207, 23.646290588378907, 22.603565216064453, 21.699999809265137, 21.899999618530273, 22.200000762939453, 21.84285068511963, 20.744441986083984, 21.5, 21.399999618530273, 21.200000762939453, 21.700000762939453, 21.700000762939453, 21.449999809265137, 21.314241790771483, 20.482318878173828, 21.767223630632675, 21.85266637802124, 21.819657802581787, 21.186334292093914, 24.6538823445638, 22.570438657488143, 21.799999237060547, 20.887227630615236, 18.862409591674805, 25.138914108276367, 20.207714080810547, 17.5148868560791, 19.77005386352539, 23.79189682006836, 23.390382766723633, 22.44146474202474, 23.714854431152343, 22.971428734915598, 23.132835070292156, 23.333332697550457, 24.050000190734863, 23.700000762939453, 23.0, 22.90479803085327, 22.774415969848633, 22.388381140572683, 23.383333524068195, 22.539999771118165],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Grasa',
                line: { color: '#ffa657', width: 2 },
                marker: { size: 6 }
            }
        ,
            {
                x: ['2025-10-26', '2026-01-23'],
                y: [23.593222441574653, 21.937020767078195],
                type: 'scatter',
                mode: 'lines',
                name: 'Tendencia',
                line: { color: '#c9d1d9', width: 2, dash: 'dot' },
                hoverinfo: 'skip'
            }
            
        ], {
            ...layout_config,
            yaxis: { title: 'Grasa (%)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            
            annotations: [{
                xref: 'paper', yref: 'paper',
                x: 0.05, y: 0.95,
                xanchor: 'left', yanchor: 'top',
                text: 'üìâ Bajando 0.13 %/sem',
                showarrow: false,
                font: { color: '#c9d1d9', size: 12 },
                bgcolor: 'rgba(22, 27, 34, 0.8)',
                bordercolor: '#30363d',
                borderwidth: 1,
                borderpad: 4
            }],
            
        });
        
        Plotly.newPlot('masa-chart', [
            
            {
                x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-28', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [57.07, 56.81, 56.95, 57.4, 57.42, 57.12, 57.2, 56.87, 57.85, 56.49, 56.23, 57.49, 57.09, 57.695, 57.94, 56.93, 56.59, 56.83, 56.725, 56.5, 57.29, 56.78, 57.77, 57.54, 57.11, 65.46166666666669, 57.8, 58.29, 58.080000000000005, 57.150000000000006, 58.150000000000006, 67.71407318115234, 56.38, 56.80666666666667, 56.52333333333333, 56.525000000000006, 56.629999999999995, 59.59, 58.83, 56.965, 57.735, 58.174, 58.6025, 59.248000000000005],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'M√∫sculo',
                line: { color: '#3fb950', width: 2 },
                marker: { size: 6 }
            }
        ,
            {
                x: ['2025-10-26', '2026-01-23'],
                y: [57.289429132456405, 58.48329745260321],
                type: 'scatter',
                mode: 'lines',
                name: 'Tendencia',
                line: { color: '#c9d1d9', width: 2, dash: 'dot' },
                hoverinfo: 'skip'
            }
            
        ], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            
            annotations: [{
                xref: 'paper', yref: 'paper',
                x: 0.05, y: 0.95,
                xanchor: 'left', yanchor: 'top',
                text: '‚û°Ô∏è Estable 0.09 kg/sem',
                showarrow: false,
                font: { color: '#c9d1d9', size: 12 },
                bgcolor: 'rgba(22, 27, 34, 0.8)',
                bordercolor: '#30363d',
                borderwidth: 1,
                borderpad: 4
            }],
            
        });
        
        Plotly.newPlot('masa-osea-chart', [{
            x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.25, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.300000190734863, 4.300000190734863, 4.199999809265137, 4.300000190734863, 4.199999809265137, 4.099999904632568, 4.199999809265137, 4.099999904632568, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.066666603088379, 4.049999952316284, 4.133333206176758, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.300000190734863, 4.300000190734863, 4.199999809265137, 4.199999809265137, 4.300000190734863, 4.300000190734863, 4.300000190734863, 4.300000190734863, 4.199999809265137, 4.174999833106995, 4.228571278708322, 4.220000076293945, 4.199999809265137, 4.25, 4.300000190734863, 4.400000095367432, 4.300000190734863, 4.333333492279053, 4.280000114440918, 4.300000190734863, 4.360000133514404],
            type: 'scatter', mode: 'lines+markers',
            line: { color: '#79c0ff', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        Plotly.newPlot('masa-agua-chart', [{
            x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-05', '2025-11-06', '2025-11-07', '2025-12-28'],
            y: [41.41, 41.22, 41.25, 41.49, 41.49, 41.31, 41.35, 41.19, 41.84, 40.92, 40.73, 49.75745391845703],
            type: 'scatter', mode: 'lines+markers',
            line: { color: '#58a6ff', width: 2 },
            fill: 'tozeroy', fillcolor: 'rgba(88, 166, 255, 0.1)'
        }], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // FC Reposo con Tendencia
        Plotly.newPlot('fc-reposo-chart', [
            
            {
                x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [56.666666666666664, 53.875, 52.25, 53.6, 52.44444444444444, 53.30769230769231, 55.214285714285715, 55.42857142857143, 56.4, 55.888888888888886, 56.125, 55.375, 58.375, 58.55555555555556, 54.94736842105263, 55.875, 59.61538461538461, 56.166666666666664, 62.25, 54.8, 52.4, 57.0, 55.125, 57.23529411764706, 57.333333333333336],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'FC Reposo',
                line: { color: '#f85149', width: 2 },
                marker: { size: 6 }
            }
        ,
            {
                x: ['2025-12-25', '2026-01-23'],
                y: [54.07416545073556, 57.41858223219606],
                type: 'scatter',
                mode: 'lines',
                name: 'Tendencia',
                line: { color: '#c9d1d9', width: 2, dash: 'dot' },
                hoverinfo: 'skip'
            }
            
        ], {
            ...layout_config,
            yaxis: { title: 'FC (bpm)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            
            annotations: [{
                xref: 'paper', yref: 'paper',
                x: 0.05, y: 0.95,
                xanchor: 'left', yanchor: 'top',
                text: '<b>üìà Sube 0.8 bpm/sem</b>',
                showarrow: false,
                font: { color: '#c9d1d9', size: 12 },
                bgcolor: 'rgba(22, 27, 34, 0.8)',
                bordercolor: '#30363d',
                borderwidth: 1,
                borderpad: 4
            }],
            
        });
        
        // Frecuencia Card√≠aca Diurna
        Plotly.newPlot('fc-diurna-chart', [
            {
                x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [54, 52, 50, 52, 50, 53, 51, 53, 54, 53, 54, 53, 56, 53, 50, 53, 52, 48, 59, 51, 49, 52, 53, 53, 54],
                type: 'scatter',
                mode: 'lines',
                name: 'M√≠nima',
                line: { color: '#58a6ff', width: 1 },
                fill: 'tonexty'
            },
            {
                x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [75.59374999999999, 71.90833333333333, 67.8962962962963, 70.54404761904762, 72.43825757575758, 61.147651515151516, 67.52268518518518, 67.63333333333334, 69.04166666666666, 73.29814814814814, 69.36385836385837, 66.87777777777778, 87.6876456876457, 83.31746031746032, 79.41172161172162, 82.45396825396827, 73.73472222222223, 71.67424242424242, 76.98280423280424, 65.7074074074074, 66.82967032967034, 73.3968253968254, 88.84176587301586, 80.53661616161617, 81.43506493506494],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Promedio',
                line: { color: '#ffa657', width: 2 }
            },
            {
                x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [118, 128, 102, 144, 124, 95, 106, 111, 118, 115, 109, 104, 177, 162, 153, 155, 107, 108, 113, 99, 156, 117, 142, 149, 166],
                type: 'scatter',
                mode: 'lines',
                name: 'M√°xima',
                line: { color: '#f85149', width: 1 },
                fill: 'tonexty'
            }
        ], {
            ...layout_config,
            yaxis: { title: 'FC (bpm)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Presi√≥n Arterial
        Plotly.newPlot('presion-chart', [
            {
                x: ['2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-07', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-18', '2025-12-19', '2025-12-20', '2025-12-21', '2025-12-22', '2025-12-23', '2025-12-24', '2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-31', '2026-01-01', '2026-01-03'],
                y: [117.33333333333333, 121.66666666666667, 122.0, 115.0, 117.0, 114.6, 116.21621621621621, 114.44776119402985, 113.77777777777777, 116.38461538461539, 115.75, 111.16666666666667, 118.0, 119.5, 112.0, 118.0, 113.5, 112.5, 111.0, 114.125, 104.0, 111.0, 115.0, 110.0, 120.7, 123.25, 119.375, 112.0, 118.5, 118.0, 114.0, 107.0, 104.0, 121.14285714285714, 121.5, 115.0, 95.5, 118.6, 120.75, 119.0, 115.0, 113.0, 112.0, 117.0, 114.0, 109.0, 105.15384615384616, 111.25, 99.0, 107.51428571428572, 111.0, 107.5, 115.6, 107.0, 112.71428571428571, 111.75, 113.0, 109.8, 111.6, 107.75, 114.375, 116.0, 107.0, 109.0],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Sist√≥lica',
                line: { color: '#f85149', width: 2 }
            },
            {
                x: ['2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-07', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-18', '2025-12-19', '2025-12-20', '2025-12-21', '2025-12-22', '2025-12-23', '2025-12-24', '2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-31', '2026-01-01', '2026-01-03'],
                y: [77.0, 76.33333333333333, 80.0, 71.5, 73.75, 73.8, 73.94594594594595, 73.53731343283582, 71.44444444444444, 74.92307692307692, 75.35, 74.16666666666667, 76.33333333333333, 76.0, 76.0, 70.0, 72.25, 73.125, 73.0, 73.375, 70.0, 67.0, 76.0, 72.0, 74.8, 76.5625, 75.375, 76.0, 65.0, 77.0, 73.0, 70.0, 65.0, 77.42857142857143, 76.75, 72.4, 61.0, 76.6, 76.5, 80.0, 75.0, 73.0, 75.0, 72.0, 76.0, 71.5, 69.23076923076923, 74.125, 61.0, 73.31428571428572, 74.0, 73.0, 76.4, 65.0, 76.14285714285714, 76.0, 77.0, 76.0, 75.8, 72.75, 79.625, 78.5, 73.0, 74.0],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Diast√≥lica',
                line: { color: '#58a6ff', width: 2 }
            }
        ], {
            ...layout_config,
            yaxis: { title: 'mmHg', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // SpO2
        Plotly.newPlot('spo2-chart', [{
            x: ['2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-05', '2026-01-06', '2026-01-07', '2026-01-08', '2026-01-10', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-22', '2026-01-23'],
            y: [98.2, 96.66666666666667, 95.5, 96.5, 97.0, 95.0, 96.0, 97.6, 96.0, 96.66666666666667, 97.0, 97.0, 98.0, 97.5, 97.33333333333333, 96.5, 98.33333333333333, 98.0, 98.5, 98.0, 97.0, 98.5, 99.0, 98.5, 96.0, 97.0],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#79c0ff', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'SpO2 (%)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Pasos
        Plotly.newPlot('pasos-chart', [{
            x: ['2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2025-12-30', '2025-12-31', '2026-01-01', '2026-01-02', '2026-01-03', '2026-01-04', '2026-01-05', '2026-01-06', '2026-01-07', '2026-01-08', '2026-01-09', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [15405, 10494, 14863, 14953, 6981, 9701, 5471, 9696, 13218, 5456, 9869, 16376, 9007, 10284, 6631, 13501, 29512, 16740, 19674, 17996, 12515, 11700, 17041, 9964, 19746, 13345, 25456, 17832, 16812],
            type: 'bar',
            marker: { color: '#58a6ff' }
        }], {
            ...layout_config,
            yaxis: { title: 'Pasos', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Distancia Recorrida
        Plotly.newPlot('distancia-chart', [{
            x: ['2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-28', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-19', '2025-12-20', '2025-12-22', '2025-12-23', '2025-12-24', '2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-17', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [4.970000000000001, 4.15, 12.080000000000002, 19.02, 27.96, 29.340000000000003, 30.189999999999998, 3.6, 3.96, 6.76, 25.560000000000002, 25.18, 21.189999999999998, 21.28, 7.08, 5.72, 18.85, 10.68, 8.100000000000001, 15.74, 18.28, 10.64, 24.990000000000002, 5.92, 28.04, 15.2, 1.08, 1.74, 2.45, 0.77, 2.34, 5.96, 2.55, 0.95, 24.839999999999996, 26.099999999999998, 15.72, 16.53, 5.64, 12.899999999999999, 7.89, 10.14, 10.14, 5.430000000000001, 2.6199999999999997, 4.859999999999999, 1.05, 0.5, 3.16, 3.45, 2.43, 5.68, 8.7, 7.21, 4.46, 16.25, 11.540000000000001, 12.829999999999998, 10.33, 1.32, 8.92, 6.109999999999999, 18.01, 7.03, 6.67],
            type: 'bar',
            marker: { 
                color: '#58a6ff',
                line: { color: '#1f6feb', width: 1 }
            }
        }], {
            ...layout_config,
            yaxis: { title: 'Distancia (km)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Calor√≠as Totales
        Plotly.newPlot('calorias-chart', [{
            x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-12-01', '2025-12-02', '2025-12-03', '2025-12-04', '2025-12-05', '2025-12-06', '2025-12-08', '2025-12-09', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-18', '2025-12-19', '2025-12-20', '2025-12-22', '2025-12-23', '2025-12-24', '2025-12-25', '2025-12-26', '2025-12-27', '2025-12-28', '2025-12-29', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-17', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [6894.0, 6797.0, 6500.0, 7187.0, 7793.0, 8795.0, 8810.0, 3400.0, 1625.0, 1624.0, 1863.0, 2748.0, 1781.0, 2983.0, 404.0, 3870.0, 3459.0, 3689.0, 2085.0, 1693.0, 3618.0, 2412.0, 3185.0, 3345.0, 3219.0, 1612.0, 2400.0, 4804.0, 2018.0, 4247.0, 3240.0, 2299.0, 1606.0, 152.0, 431.0, 91.0, 398.0, 1083.0, 966.0, 376.0, 3846.0, 2718.0, 1593.0, 5119.0, 1527.0, 4242.0, 1953.0, 957.0, 2571.0, 579.0, 80.0, 626.0, 812.0, 208.0, 151.0, 424.0, 680.0, 1050.0, 1802.0, 1719.0, 1588.0, 409.0, 1553.0, 1022.0, 1387.0, 1467.0, 160.0, 1314.0, 521.0, 1543.0, 979.0, 967.0],
            type: 'bar',
            marker: { 
                color: '#ffa657',
                line: { color: '#d4a72c', width: 1 }
            }
        }], {
            ...layout_config,
            yaxis: { title: 'Calor√≠as (kcal)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Glucosa en Sangre (Basal vs Post)
        Plotly.newPlot('glucosa-chart', [
            {
                x: ['2025-11-02 07:54', '2025-11-02 07:54', '2025-11-03 07:25', '2025-11-03 07:25', '2025-11-05 11:11', '2025-11-05 15:03', '2025-11-06 06:24', '2025-11-06 06:24', '2025-11-11 06:06', '2025-11-11 06:06', '2025-11-11 06:06', '2025-11-11 16:07', '2025-11-11 16:07', '2025-11-11 16:07', '2025-11-11 16:11', '2025-11-11 16:11', '2025-11-11 16:11', '2025-11-13 07:32', '2025-11-13 07:32', '2025-11-13 07:32', '2025-11-14 06:19', '2025-11-14 06:19', '2025-11-14 06:19', '2025-11-15 06:36', '2025-11-15 06:36', '2025-11-15 06:36', '2025-11-16 05:49', '2025-11-16 05:49', '2025-11-16 05:49', '2025-11-17 07:07', '2025-11-17 07:07', '2025-11-17 07:07', '2025-11-20 07:45', '2025-11-20 07:45', '2025-11-20 07:45', '2025-11-22 06:57', '2025-11-22 06:57', '2025-11-22 06:57', '2025-11-22 22:08', '2025-11-22 22:08', '2025-11-22 22:08', '2025-11-24 06:49', '2025-11-24 06:49', '2025-11-24 06:49', '2025-11-25 07:39', '2025-11-25 07:39', '2025-11-25 07:39', '2025-11-25 21:45', '2025-11-25 21:45', '2025-11-25 21:45', '2025-11-27 20:57', '2025-11-27 20:57', '2025-11-27 20:57', '2025-11-29 06:46', '2025-11-29 06:46', '2025-11-29 06:46', '2025-12-02 21:08', '2025-12-03 07:43', '2025-12-04 07:06', '2025-12-05 05:53', '2025-12-06 07:05', '2025-12-07 06:06', '2025-12-08 07:15', '2025-12-10 06:50', '2025-12-10 06:50', '2025-12-10 06:50', '2025-12-10 06:50', '2025-12-10 21:11', '2025-12-10 21:11', '2025-12-10 21:11', '2025-12-10 21:11', '2025-12-11 07:10', '2025-12-11 07:10', '2025-12-11 07:10', '2025-12-11 07:10', '2025-12-12 07:35', '2025-12-12 07:35', '2025-12-12 07:35', '2025-12-12 07:35', '2025-12-12 20:51', '2025-12-12 20:51', '2025-12-12 20:51', '2025-12-12 20:51', '2025-12-13 07:21', '2025-12-13 07:21', '2025-12-13 07:21', '2025-12-13 07:21', '2025-12-14 07:25', '2025-12-14 07:25', '2025-12-14 07:25', '2025-12-14 07:25', '2025-12-15 07:29', '2025-12-15 07:29', '2025-12-15 07:29', '2025-12-15 07:29', '2025-12-16 06:48', '2025-12-16 06:48', '2025-12-16 06:48', '2025-12-16 06:48', '2025-12-17 06:21', '2025-12-17 06:21', '2025-12-17 06:21', '2025-12-17 06:21', '2025-12-18 07:39', '2025-12-18 07:39', '2025-12-18 07:39', '2025-12-19 07:00', '2025-12-19 07:00', '2025-12-20 07:43', '2025-12-20 07:43', '2025-12-23 07:23', '2025-12-23 07:23', '2025-12-28 07:10', '2025-12-28 07:10', '2025-12-28 07:10', '2025-12-29 07:26', '2025-12-29 07:26', '2026-01-03 07:11', '2026-01-07 06:54', '2026-01-10 06:16', '2026-01-14 07:26', '2026-01-15 04:28', '2026-01-16 06:17', '2026-01-17 07:01', '2026-01-18 06:30', '2026-01-19 06:03', '2026-01-20 06:36', '2026-01-21 06:54', '2026-01-23 07:35'],
                y: [97.9, 97.9, 95.9, 95.9, 115.9, 155.9, 97.9, 97.9, 94.9, 94.9, 94.9, 100.9, 100.9, 100.9, 109.9, 109.9, 109.9, 89.9, 89.9, 89.9, 95.9, 95.9, 95.9, 93.9, 93.9, 93.9, 101.9, 101.9, 101.9, 89.9, 89.9, 89.9, 91.9, 91.9, 91.9, 90.9, 90.9, 90.9, 97.9, 97.9, 97.9, 92.9, 92.9, 92.9, 94.9, 94.9, 94.9, 96.9, 96.9, 96.9, 107.9, 107.9, 107.9, 99.9, 99.9, 99.9, 84.9, 90.9, 90.9, 85.9, 84.9, 90.9, 94.9, 117.9, 117.9, 117.9, 117.9, 106.9, 106.9, 106.9, 106.9, 102.9, 102.9, 102.9, 102.9, 95.9, 95.9, 95.9, 95.9, 85.9, 85.9, 85.9, 85.9, 98.9, 98.9, 98.9, 98.9, 98.9, 98.9, 98.9, 98.9, 93.9, 93.9, 93.9, 93.9, 105.9, 105.9, 105.9, 105.9, 95.9, 95.9, 95.9, 95.9, 97.9, 97.9, 97.9, 100.9, 100.9, 94.9, 94.9, 95.9, 95.9, 98.9, 98.9, 98.9, 98.9, 98.9, 108.9, 110.9, 91.9, 93.9, 99.9, 95.9, 101.9, 89.9, 100.9, 93.9, 94.9, 108.9],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Basal (Ayunas)',
                connectgaps: false, // No conectar puntos si hay huecos grandes
                line: { color: '#3fb950', width: 2 }, // Verde
                marker: { size: 6, symbol: 'circle' }
            },
            {
                x: ['2025-10-26 10:52', '2025-10-29 11:59', '2025-10-30 09:46', '2025-10-31 10:51', '2025-11-01 11:24', '2025-11-02 10:54', '2025-11-02 10:54', '2025-11-02 10:54', '2025-11-03 10:25', '2025-11-05 13:34', '2025-11-05 13:34', '2025-11-05 14:11', '2025-11-05 15:59', '2025-11-05 16:34', '2025-11-05 18:03', '2025-11-05 18:59', '2025-11-06 09:24', '2025-11-07 10:34', '2025-11-07 10:34', '2025-11-07 10:34', '2025-11-08 09:21', '2025-11-08 09:21', '2025-11-08 09:21', '2025-11-09 09:38', '2025-11-09 09:38', '2025-11-09 09:38', '2025-11-10 08:24', '2025-11-10 08:24', '2025-11-10 08:24', '2025-11-12 08:25', '2025-11-12 08:25', '2025-11-12 08:25', '2025-11-16 08:44', '2025-11-16 08:44', '2025-11-16 08:44', '2025-11-18 14:22', '2025-11-18 14:22', '2025-11-18 14:22', '2025-11-19 08:08', '2025-11-19 08:08', '2025-11-19 08:08', '2025-11-19 14:48', '2025-11-19 14:48', '2025-11-19 14:48', '2025-11-21 16:50', '2025-11-21 16:50', '2025-11-21 16:50', '2025-11-22 22:08', '2025-11-23 08:32', '2025-11-23 08:32', '2025-11-23 08:32', '2025-11-26 12:37', '2025-11-26 12:37', '2025-11-26 12:37', '2025-12-01 14:11', '2025-12-04 21:05', '2025-12-10 14:33', '2025-12-10 14:33', '2025-12-10 14:33', '2025-12-10 14:33', '2025-12-11 13:08', '2025-12-11 13:08', '2025-12-11 13:08', '2025-12-11 13:08', '2025-12-12 11:19', '2025-12-12 11:19', '2025-12-12 11:19', '2025-12-12 11:19', '2025-12-12 14:15', '2025-12-12 14:15', '2025-12-12 14:15', '2025-12-12 14:15', '2025-12-13 22:22', '2025-12-13 22:22', '2025-12-13 22:22', '2025-12-13 22:22', '2025-12-14 13:45', '2025-12-14 13:45', '2025-12-14 13:45', '2025-12-14 13:45', '2025-12-16 13:37', '2025-12-16 13:37', '2025-12-16 13:37', '2025-12-16 13:37', '2025-12-19 21:23', '2025-12-19 21:23', '2025-12-20 13:53', '2025-12-20 13:53', '2025-12-25 10:02', '2025-12-25 10:02', '2025-12-25 18:54', '2025-12-25 18:54', '2025-12-26 08:13', '2025-12-26 08:13', '2025-12-27 08:03', '2025-12-27 08:03', '2025-12-27 08:03', '2025-12-30 15:51', '2025-12-30 15:51', '2026-01-08 08:42', '2026-01-09 08:09', '2026-01-11 08:16', '2026-01-12 08:02', '2026-01-13 08:13', '2026-01-20 14:45', '2026-01-22 08:33'],
                y: [92.9, 92.9, 93.9, 105.9, 99.9, 97.9, 97.9, 97.9, 95.9, 99.9, 99.9, 115.9, 124.9, 99.9, 155.9, 124.9, 97.9, 101.9, 101.9, 101.9, 106.9, 106.9, 106.9, 100.9, 100.9, 100.9, 92.9, 92.9, 92.9, 87.9, 87.9, 87.9, 102.9, 102.9, 102.9, 119.9, 119.9, 119.9, 92.9, 92.9, 92.9, 99.9, 99.9, 99.9, 128.9, 128.9, 128.9, 97.9, 94.9, 94.9, 94.9, 111.9, 111.9, 111.9, 109.9, 123.9, 155.9, 155.9, 155.9, 155.9, 119.9, 119.9, 119.9, 119.9, 95.9, 95.9, 95.9, 95.9, 87.9, 87.9, 87.9, 87.9, 110.9, 110.9, 110.9, 110.9, 102.9, 102.9, 102.9, 102.9, 102.9, 102.9, 102.9, 102.9, 107.9, 107.9, 90.9, 90.9, 104.9, 104.9, 129.9, 129.9, 100.9, 100.9, 99.9, 99.9, 99.9, 106.9, 106.9, 107.9, 101.9, 98.9, 92.9, 107.9, 128.9, 108.9],
                type: 'scatter',
                mode: 'markers', // Solo puntos para postprandial (menos tendencia lineal)
                name: 'Postprandial',
                marker: { color: '#d29922', size: 7, symbol: 'diamond' } // Naranja
            }
        ], {
            ...layout_config,
            yaxis: { title: 'mg/dL', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            shapes: [
                {
                    type: 'rect',
                    xref: 'paper',
                    x0: 0, x1: 1,
                    y0: 70, y1: 100, // Rango saludable referencia
                    fillcolor: '#3fb950',
                    opacity: 0.1,
                    line: { width: 0 },
                    layer: 'below'
                }
            ]
        });
        
        // Tasa Metab√≥lica Basal
        Plotly.newPlot('tmb-chart', [{
            x: ['2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19', '2025-11-20', '2025-11-21', '2025-11-22', '2025-11-23', '2025-11-24', '2025-11-25', '2025-11-26', '2025-11-27', '2025-11-28', '2025-11-29', '2025-12-02', '2025-12-03', '2025-12-10', '2025-12-11', '2025-12-12', '2025-12-13', '2025-12-14', '2025-12-15', '2025-12-16', '2025-12-17', '2025-12-19', '2025-12-20', '2025-12-21', '2025-12-23', '2025-12-25', '2025-12-28', '2026-01-07', '2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
            y: [1728.0, 1717.0, 1709.0, 1713.0, 1738.0, 1732.0, 1724.0, 1726.0, 1734.5, 1730.5, 1727.0, 1740.3333333333333, 1679.6666666666667, 1702.0, 1704.0, 1736.3333333333333, 1705.5, 1719.0, 1675.6666666666667, 1697.5, 1705.3333333333333, 1668.8, 1704.1666666666667, 1690.4, 1691.3333333333333, 1716.0, 1728.0, 1721.3333333333333, 1737.6666666666667, 1725.0, 1715.4, 1743.3333333333333, 1753.0, 1745.0, 1748.0, 1723.0, 1769.0, 1792.0, 1795.0, 1712.0, 1710.0, 1732.0, 1772.0, 1684.0, 1774.0, 1791.0, 1833.0, 1725.0, 1826.0, 1845.0, 1832.0, 1719.5, 1720.0, 1735.3333333333333, 1711.0, 1732.0, 1723.8333333333333, 1722.0, 1736.0, 1769.0, 1778.0, 1757.0, 1765.5, 1765.0, 1755.5, 1775.2],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#ffa657', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'kcal/d√≠a', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Gr√°fico de Sue√±o - Barras Apiladas
        Plotly.newPlot('sueno-chart', [
            {
                x: ['2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [0.0, 1.3833333333333333, 1.1416666666666668, 0.31666666666666665, 1.775, 1.05, 0.75, 0.11666666666666667, 1.2916666666666665, 1.1416666666666666, 3.0333333333333337, 1.3, 0.06666666666666667, 0.825],
                name: 'Profundo',
                type: 'bar',
                marker: { color: '#1f6feb' }
            },
            {
                x: ['2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [1.1916666666666667, 3.875, 4.033333333333333, 5.35, 4.441666666666666, 4.075, 5.625, 3.325, 6.825, 4.3, 5.8583333333333325, 3.2583333333333333, 2.658333333333333, 5.816666666666666],
                name: 'Ligero',
                type: 'bar',
                marker: { color: '#d29922' }
            },
            {
                x: ['2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [0.10833333333333334, 1.825, 1.7166666666666666, 1.0916666666666668, 0.525, 0.38333333333333336, 1.3416666666666668, 0.8833333333333333, 1.25, 1.9583333333333333, 2.8833333333333333, 1.3333333333333333, 0.55, 0.8],
                name: 'REM',
                type: 'bar',
                marker: { color: '#8957e5' }
            },
            {
                x: ['2026-01-10', '2026-01-11', '2026-01-12', '2026-01-13', '2026-01-14', '2026-01-15', '2026-01-16', '2026-01-17', '2026-01-18', '2026-01-19', '2026-01-20', '2026-01-21', '2026-01-22', '2026-01-23'],
                y: [0.18333333333333332, 1.15, 1.4, 0.625, 0.7583333333333333, 0.725, 0.9833333333333334, 1.225, 1.5333333333333334, 0.5166666666666667, 2.191666666666667, 1.3333333333333333, 0.6583333333333333, 0.9083333333333334],
                name: 'Despierto',
                type: 'bar',
                marker: { color: '#f85149' }
            }
        ], {
            ...layout_config,
            barmode: 'stack',
            yaxis: { title: 'Horas', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            showlegend: true,
            legend: { 
                orientation: 'h',
                yanchor: 'bottom',
                y: 1.02,
                xanchor: 'right',
                x: 1,
                bgcolor: 'rgba(22, 27, 34, 0.8)'
            }
        });
        
    
    // FUNCIONES PARA LOGS
    function toggleLogs() {
        const logsContent = document.getElementById('logs-content');
        const toggleBtn = document.getElementById('logs-toggle-btn');
        
        if (logsContent.classList.contains('logs-hidden')) {
            logsContent.classList.remove('logs-hidden');
            toggleBtn.textContent = '‚ñ≤ Ocultar logs';
            toggleBtn.classList.add('expanded');
        } else {
            logsContent.classList.add('logs-hidden');
            toggleBtn.textContent = '‚ñº Ver logs completos (√∫ltimas 500 l√≠neas)';
            toggleBtn.classList.remove('expanded');
        }
    }
    
    function formatearLogs() {
        const logsContent = document.getElementById('logs-content');
        if (!logsContent) return;
        
        let html = logsContent.innerHTML;
        
        // Colorear seg√∫n nivel de log
        html = html.replace(/\[INFO\]/g, '<span class="log-info">[INFO]</span>');
        html = html.replace(/\[WARNING\]/g, '<span class="log-warning">[WARNING]</span>');
        html = html.replace(/\[ERROR\]/g, '<span class="log-error">[ERROR]</span>');
        html = html.replace(/‚úÖ/g, '<span class="log-success">‚úÖ</span>');
        html = html.replace(/‚ùå/g, '<span class="log-error">‚ùå</span>');
        html = html.replace(/‚ö†Ô∏è/g, '<span class="log-warning">‚ö†Ô∏è</span>');
        
        logsContent.innerHTML = html;
    }
    
    // Ejecutar al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', formatearLogs);
    
        const circuloData = {
            presupuesto: 1700,
            comido: 0,
            ejercicio: 0,
            restante: 1700
        };
        
        new Chart(document.getElementById('circulo-calorias'), {
            type: 'doughnut',
            data: {
                labels: ['Comido', 'Restante'],
                datasets: [{
                    data: [0, 1700],
                    backgroundColor: ['#ff6384', '#3fb950'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '80%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        
        // Actualizar valores texto
        const restanteEl = document.getElementById('restante-valor');
        if(restanteEl) {
            restanteEl.textContent = Math.abs(1700);
            restanteEl.style.color = '#3fb950';
        }
        const comidoEl = document.getElementById('comido-valor');
        if(comidoEl) comidoEl.textContent = 0;
        const ejercicioEl = document.getElementById('ejercicio-valor');
        if(ejercicioEl) ejercicioEl.textContent = 0;
        
        // Recuperado: Actualizar presupuesto
        const presupuestoEl = document.getElementById('presupuesto-valor');
        if(presupuestoEl) presupuestoEl.textContent = 1700;
        
        new Chart(document.getElementById('macro-proteinas'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [0, 100],
                    backgroundColor: ['#a855f7', 'rgba(168, 85, 247, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        
        new Chart(document.getElementById('macro-carbohidratos'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [0, 100],
                    backgroundColor: ['#3b82f6', 'rgba(59, 130, 246, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        
        new Chart(document.getElementById('macro-grasas'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [0, 100],
                    backgroundColor: ['#f59e0b', 'rgba(245, 158, 11, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        
        // Definir plugin localmente
        const percentagePlugin = 
    {
        id: 'percentageLabels',
        afterDatasetsDraw(chart, args, options) {
            const {ctx} = chart;
            ctx.save();
            
            chart.data.datasets.forEach((dataset, i) => {
                chart.getDatasetMeta(i).data.forEach((datapoint, index) => {
                    const {x, y} = datapoint.tooltipPosition();
                    const value = dataset.data[index];
                    
                    if (value > 5) { // Solo mostrar si es > 5% para que quepa
                        ctx.font = 'bold 12px sans-serif';
                        ctx.fillStyle = '#ffffff';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.shadowColor = 'rgba(0,0,0,0.5)';
                        ctx.shadowBlur = 4;
                        ctx.fillText(value + '%', x, y);
                    }
                });
            });
            ctx.restore();
        }
    }
    ;

        new Chart(document.getElementById('macros-recomendados'), {
            type: 'pie',
            data: {
                labels: ['Carb', 'Grasa', 'Prot'],
                datasets: [{
                    data: [55, 25, 20],
                    backgroundColor: ['#3b82f6', '#f59e0b', '#a855f7'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                layout: { padding: 10 }
            },
            plugins: [percentagePlugin]
        });
        
        new Chart(document.getElementById('macros-reales'), {
            type: 'pie',
            data: {
                labels: ['Carb', 'Grasa', 'Prot'],
                datasets: [{
                    data: [42, 40, 18],
                    backgroundColor: ['#3b82f6', '#f59e0b', '#a855f7'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                layout: { padding: 10 }
            },
            plugins: [percentagePlugin]
        });
        
        new Chart(document.getElementById('presupuesto-consumo-chart'), {
            type: 'line',
            data: {
                labels: ["2026-01-11", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16", "2026-01-17", "2026-01-18", "2026-01-19", "2026-01-20", "2026-01-21", "2026-01-22", "2026-01-23"],
                datasets: [
                    {
                        label: 'Presupuesto',
                        data: [3272.0, 2733.0, 3109.0, 3169.0, 1722.0, 1748.0, 1929.0, 1778.0, 3081.0, 2286.0, 3310.0, 2742.0, 2751.0],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 3
                    },
                    {
                        label: 'Comido',
                        data: [2243.0, 1816.0, 2334.0, 2303.0, 2636.0, 1756.0, 0, 213.0, 3076.0, 1804.0, 2435.0, 1517.0, 2662.0],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 3
                    },
                    {
                        label: 'Ejercicio',
                        data: [1553.0, 1022.0, 1387.0, 1467.0, 0, 0, 160.0, 0, 1314.0, 521.0, 1543.0, 979.0, 967.0],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true, position: 'bottom', labels: { color: '#8b949e', boxWidth: 10, padding: 10 } },
                    title: { display: false }
                },
                scales: {
                    x: { ticks: { color: '#8b949e', font: { size: 10 } }, grid: { color: 'rgba(139, 148, 158, 0.1)' } },
                    y: { ticks: { color: '#8b949e', font: { size: 10 } }, grid: { color: 'rgba(139, 148, 158, 0.1)' } }
                },
                interaction: { mode: 'index', intersect: false }
            }
        });
        
        </script>
    </body>
    </html>
    