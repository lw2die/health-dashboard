
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard de Salud - HealthConnect</title>
        <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
        
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
            color: #c9d1d9;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5em;
            color: #58a6ff;
            margin-bottom: 10px;
        }
        
        h2 {
            color: #58a6ff;
            margin: 30px 0 20px 0;
            font-size: 1.8em;
        }
        
        h3 {
            color: #79c0ff;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .subtitle {
            color: #8b949e;
            font-size: 1.1em;
        }
        
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        /* HEALTHSPAN INDEX - HERO CARD */
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        
        .healthspan-hero {
            background: linear-gradient(135deg, #1a3a52 0%, #2d5a7b 100%);
            border: 2px solid #58a6ff;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(88, 166, 255, 0.4);
        }
        
        .healthspan-title {
            text-align: center;
            font-size: 1.5em;
            color: #79c0ff;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }
        
        .healthspan-main-score {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .healthspan-value {
            font-size: 5em;
            font-weight: bold;
        }
        
        .healthspan-status {
            font-size: 1.3em;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .healthspan-subscores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .subscore-card {
            background: rgba(22, 27, 34, 0.6);
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .subscore-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .subscore-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .subscore-bar {
            height: 6px;
            background: #161b22;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .subscore-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .subscore-description {
            color: #6e7681;
            font-size: 0.75em;
            margin-top: 10px;
            line-height: 1.3;
            font-style: italic;
        }
        
        .healthspan-description {
            color: #8b949e;
            font-size: 0.85em;
            margin-top: 5px;
            text-align: center;
            font-style: italic;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.3);
        }
        
        .metric-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-detail {
            color: #8b949e;
            font-size: 0.9em;
        }
        
        .charts-section {
            margin: 40px 0;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
        }
        
        .chart-container {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
        }
        
        .chart-empty {
            color: #8b949e;
            text-align: center;
            padding: 40px;
            font-style: italic;
        }
        
        .training-section, .recommendations-section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #30363d;
        }
        
        th {
            color: #58a6ff;
            font-weight: 600;
        }
        
        tr:hover {
            background: #0d1117;
        }
        
        .recommendations-list {
            list-style: none;
            padding: 0;
        }
        
        .recommendations-list li {
            padding: 12px;
            margin: 10px 0;
            background: #0d1117;
            border-left: 3px solid #58a6ff;
            border-radius: 4px;
        }
        
        .laboratorio-section {
            background: #161b22;
            border: 2px solid #58a6ff;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .score-card {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .score-main {
            grid-column: 1 / -1;
            border: 2px solid #58a6ff;
        }
        
        .score-label {
            color: #8b949e;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .score-value {
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .alertas-section {
            margin-top: 30px;
        }
        
        .alerta-item {
            background: #0d1117;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
        }
        
        @media (max-width: 768px) {
            .healthspan-value {
                font-size: 3.5em;
            }
            .healthspan-subscores {
                grid-template-columns: 1fr 1fr;
            }
            .charts-grid {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 1.8em;
            }
        }
        
        /* ESTILOS PARA SECCI√ìN DE LOGS */
        .logs-section {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .logs-summary {
            background: #0d1117;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .logs-summary p {
            margin: 8px 0;
            font-size: 1.05em;
        }
        
        .logs-toggle-btn {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: background 0.2s;
        }
        
        .logs-toggle-btn:hover {
            background: #2ea043;
        }
        
        .logs-toggle-btn.expanded {
            background: #da3633;
        }
        
        #logs-content {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px;
            max-height: 500px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #c9d1d9;
        }
        
        .logs-hidden {
            display: none;
        }
        
        .log-info { color: #58a6ff; }
        .log-warning { color: #d29922; }
        .log-error { color: #f85149; }
        .log-success { color: #3fb950; }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        /* NUTRITION CARDS */
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        
        .nutrition-section {
            background: linear-gradient(135deg, #2d1b3d 0%, #3d2b4d 100%);
            border: 2px solid #b392f0;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .nutrition-section h2 {
            color: #d2a8ff;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .nutrition-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid #b392f0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .nutrition-card h3 {
            color: #d2a8ff;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        
        .macro-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .macro-label {
            min-width: 120px;
            color: #c9d1d9;
            font-size: 0.95em;
        }
        
        .macro-value {
            margin-left: auto;
            color: #d2a8ff;
            font-weight: bold;
        }
        
        .deficit-positive {
            color: #3fb950 !important;
        }
        
        .deficit-negative {
            color: #f85149 !important;
        }
        
        .deficit-neutral {
            color: #ffa657 !important;
        }
    </style>
    
        
        <script>
        async function actualizar() {
        ¬† ¬† const msg = document.getElementById('msg');
        ¬† ¬† msg.textContent = '‚è≥ Actualizando...';
        ¬† ¬†¬†
        ¬† ¬† try {
        ¬† ¬† ¬† ¬† const res = await fetch('actualizar', {method: 'POST'});
        ¬† ¬† ¬† ¬† if (res.ok) {
        ¬† ¬† ¬† ¬† ¬† ¬† msg.textContent = '‚úÖ OK';
        ¬† ¬† ¬† ¬† ¬† ¬† setTimeout(() => location.reload(), 2000);
        ¬† ¬† ¬† ¬† } else {
        ¬† ¬† ¬† ¬† ¬† ¬† msg.textContent = '‚ùå Error';
        ¬† ¬† ¬† ¬† }
        ¬† ¬† } catch (e) {
        ¬† ¬† ¬† ¬† msg.textContent = '‚ùå ' + e.message;
        ¬† ¬† }
        }
        </script>
    </head>
    <body>
        <div class="container">
            <header>
                <h1>Dashboard de Salud</h1>
                <p class="subtitle">√öltima actualizaci√≥n: 19/11/2025 21:46 (Argentina)</p>
                
                <button onclick="actualizar()" style="background:#3fb950;color:white;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;margin-left:20px;">
                ¬† ¬† üîÑ Actualizar
                </button>
                <span id="msg" style="margin-left:10px;"></span>
                
            </header>
            
            
    <div class="healthspan-hero">
        <div class="healthspan-title">üèÜ HEALTHSPAN INDEX</div>
        <div class="healthspan-main-score">
            <div class="healthspan-value" style="color: #3fb950;">86</div>
            <div class="healthspan-status" style="color: #3fb950;">EXCELENTE</div>
            <div class="healthspan-description">Indicador de a√±os de vida saludable basado en fitness, composici√≥n corporal y recuperaci√≥n (ventana 7 d√≠as)</div>
        </div>
        
        <div class="healthspan-subscores">
            <div class="subscore-card">
                <div class="subscore-label">üí™ FITNESS</div>
                <div class="subscore-value" style="color: #3fb950;">100</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 100%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">PAI semanal + balance entrenamiento (TSB) + capacidad aer√≥bica (VO2max)</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üèãÔ∏è BODY</div>
                <div class="subscore-value" style="color: #f85149;">45</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 45%; background: #f85149;"></div>
                </div>
                <div class="subscore-description">Peso, grasa corporal y masa muscular vs objetivos (promedio 7d)</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üò¥ RECOVERY</div>
                <div class="subscore-value" style="color: #3fb950;">100</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 100%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">Calidad de sue√±o + frecuencia card√≠aca en reposo + saturaci√≥n de ox√≠geno</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">üî• METABOLIC</div>
                <div class="subscore-value" style="color: #3fb950;">85</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 85%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">Presi√≥n arterial + biomarcadores de salud metab√≥lica</div>
            </div>
            
            <div class="subscore-card">
                <div class="subscore-label">‚ö° FUNCTIONAL</div>
                <div class="subscore-value" style="color: #3fb950;">100</div>
                <div class="subscore-bar">
                    <div class="subscore-fill" style="width: 100%; background: #3fb950;"></div>
                </div>
                <div class="subscore-description">Pasos diarios y movilidad funcional (promedio 7d)</div>
            </div>
        </div>
    </div>
    
            
            
    <div class="laboratorio-section">
        <h2>üß¨ Dashboard Cient√≠fico</h2>
        <div class="scores-grid">
            <div class="score-card score-main">
                <div class="score-label">Longevity Score</div>
                <div class="score-value" style="color: #3fb950;">85.5/100</div>
                <div class="subscore-description">Puntuaci√≥n general de salud basada en an√°lisis de laboratorio (biomarcadores sangu√≠neos)</div>
            </div>
            <div class="score-card">
                <div class="score-label">CardioScore</div>
                <div class="score-value" style="color: #3fb950;">90.0</div>
                <div class="subscore-description">Colesterol total, HDL, LDL, triglic√©ridos y homociste√≠na</div>
            </div>
            <div class="score-card">
                <div class="score-label">MetabolicScore</div>
                <div class="score-value" style="color: #d29922;">65.0</div>
                <div class="subscore-description">Glucosa, HbA1c, insulina y marcadores de resistencia insul√≠nica</div>
            </div>
            <div class="score-card">
                <div class="score-label">InflammationScore</div>
                <div class="score-value" style="color: #3fb950;">100.0</div>
                <div class="subscore-description">Prote√≠na C reactiva, ferritina y otros marcadores inflamatorios</div>
            </div>
            <div class="score-card">
                <div class="score-label">HormoneScore</div>
                <div class="score-value" style="color: #3fb950;">100.0</div>
                <div class="subscore-description">Testosterona, vitamina D, hormonas tiroideas y cortisol</div>
            </div>
        </div>
        <div class="alertas-section">
            <h3>‚ö†Ô∏è Alertas</h3>
            
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">‚úÖ Control Gluc√©mico Actual: EXCELENTE</div>
            <div style="color: #c9d1d9; margin-top: 5px;">Glucemias recientes bien controladas (promedio: 99.9 mg/dL). Tu tratamiento funciona correctamente.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Actualizar: HbA1c</div>
            <div style="color: #c9d1d9; margin-top: 5px;">Tu √∫ltimo an√°lisis de HbA1c tiene 13 meses (fecha: 2024-09-26). Se recomienda actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Vitamina D desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (18 meses). Considera actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê Ferritina desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (18 meses). Considera actualizar.</div>
        </div>
        
        <div class="alerta-item" style="border-left: 4px solid #d29922;">
            <div style="font-weight: bold; color: #d29922;">üïê B12 desactualizado</div>
            <div style="color: #c9d1d9; margin-top: 5px;">√öltimo an√°lisis: 2024-05-18 (18 meses). Considera actualizar.</div>
        </div>
        
        </div>
    </div>
    
            
            
    <div style="background: linear-gradient(135deg, #1e3a5f 0%, #2d5a7b 100%); 
                border-radius: 12px; padding: 30px; margin: 30px 0; 
                border: 1px solid rgba(255,255,255,0.1);">
        
        <h2 style="color: #58a6ff; font-size: 24px; margin-bottom: 20px; display: flex; align-items: center;">
            üìã Plan de Implementaci√≥n
        </h2>
        
        <!-- Adherencia al Plan (7 d√≠as) -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                1. Adherencia al Plan (7 d√≠as)
            </h3>
            
            <!-- D√©ficit Cal√≥rico -->
            <div style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #8b949e;">üî• D√©ficit: D√≠as en d√©ficit cal√≥rico (>0 kcal)</span>
                    <span style="color: #f85149; font-weight: bold;">
                        3/7 d√≠as (43%)
                    </span>
                </div>
                <div style="background: rgba(139, 148, 158, 0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #f85149; height: 100%; width: 42.857142857142854%; transition: width 0.3s;"></div>
                </div>
            </div>
            
            <!-- Prote√≠na -->
            <div style="margin-bottom: 10px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #8b949e;">ü•© Prote√≠na: >160g (tu meta)</span>
                    <span style="color: #d29922; font-weight: bold;">
                        4/7 d√≠as (57%)
                    </span>
                </div>
                <div style="background: rgba(139, 148, 158, 0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #d29922; height: 100%; width: 57.14285714285714%; transition: width 0.3s;"></div>
                </div>
            </div>
            
            <!-- % Cumplimiento -->
            <div style="margin-top: 15px; padding: 10px; background: rgba(88, 166, 255, 0.1); border-radius: 6px;">
                <span style="color: #58a6ff; font-size: 12px;">Calculado % d√≠as cumpliendo</span>
            </div>
        </div>
        
        <!-- Barra de Progreso -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                2. Barra de Progreso
            </h3>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div style="text-align: left;">
                    <div style="color: #8b949e; font-size: 11px;">PESO INICIAL</div>
                    <div style="color: #f85149; font-size: 18px; font-weight: bold;">83.0 kg</div>
                </div>
                <div style="text-align: center;">
                    <div style="color: #8b949e; font-size: 11px;">PESO ACTUAL</div>
                    <div style="color: #58a6ff; font-size: 18px; font-weight: bold;">81.3 kg</div>
                </div>
                <div style="text-align: right;">
                    <div style="color: #8b949e; font-size: 11px;">PESO META</div>
                    <div style="color: #3fb950; font-size: 18px; font-weight: bold;">79.0 kg</div>
                </div>
            </div>
            
            <!-- Barra de progreso -->
            <div style="background: rgba(139, 148, 158, 0.3); height: 20px; border-radius: 10px; overflow: hidden; margin-bottom: 10px;">
                <div style="background: linear-gradient(90deg, #3fb950 0%, #58a6ff 100%); height: 100%; width: 42.49992370605469%; transition: width 0.5s;"></div>
            </div>
            
            <div style="text-align: center; color: #c9d1d9; font-size: 14px;">
                % progreso = (1.7 kg perdidos / 4.0 kg total) = 42.5%
            </div>
        </div>
        
        <!-- Alertas Din√°micas -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                3. Alertas Din√°micas
            </h3>
    
            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; 
                        margin-bottom: 10px; border-left: 4px solid #3fb950;">
                <div style="display: flex; align-items: start; gap: 10px;">
                    <span style="font-size: 24px;">‚úÖ</span>
                    <div>
                        <div style="color: #c9d1d9; font-weight: bold; margin-bottom: 5px;">
                            PAI Excelente
                        </div>
                        <div style="color: #8b949e; font-size: 14px;">
                            PAI: 137/100. ¬°Mant√©n este nivel de actividad!
                        </div>
                    </div>
                </div>
            </div>
        
            <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; 
                        margin-bottom: 10px; border-left: 4px solid #f85149;">
                <div style="display: flex; align-items: start; gap: 10px;">
                    <span style="font-size: 24px;">ü•©</span>
                    <div>
                        <div style="color: #c9d1d9; font-weight: bold; margin-bottom: 5px;">
                            Prote√≠na Baja 3 D√≠as Seguidos
                        </div>
                        <div style="color: #8b949e; font-size: 14px;">
                            Riesgo de p√©rdida muscular. Meta: 160g/d√≠a. Agrega 1 snack proteico.
                        </div>
                    </div>
                </div>
            </div>
        
        </div>
        
        <!-- Predicci√≥n -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px;">
            <h3 style="color: #c9d1d9; font-size: 18px; margin-bottom: 15px;">
                4. Predicci√≥n
            </h3>
    
            <div style="margin-bottom: 15px;">
                <div style="color: #8b949e; font-size: 14px; margin-bottom: 5px;">
                    üéØ Ritmo actual: 0.20 kg/semana
                </div>
                <div style="color: #c9d1d9; font-size: 16px; font-weight: bold;">
                    Tiempo estimado: 2 meses y 3 semanas
                </div>
            </div>
            
            <div style="background: rgba(88, 166, 255, 0.1); padding: 12px; border-radius: 6px;">
                <div style="color: #58a6ff; font-size: 13px; margin-bottom: 8px;">
                    üìä Para mantener el progreso:
                </div>
                <div style="color: #8b949e; font-size: 12px;">
                    ‚Ä¢ Mantener d√©ficit cal√≥rico consistente (com√© menos de lo que quem√°s)<br>
                    ‚Ä¢ Cumplir meta de prote√≠na (‚â•160g) para preservar m√∫sculo<br>
                    ‚Ä¢ Registrar todas las comidas para mejor seguimiento<br>
                    ‚Ä¢ Adherencia actual: 50%
                </div>
            </div>
        
        </div>
    </div>
    
            
            <div class="metrics-grid">
                
    <div class="metric-card">
        <div class="metric-label">PAI Semanal</div>
        <div class="metric-value" style="color: #3fb950;">137</div>
        <div class="metric-detail">√ìptimo (Objetivo: 100)</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Peso Actual</div>
        <div class="metric-value" style="color: #d29922;">81.3 kg</div>
        <div class="metric-detail">Cerca (+2.3 kg)</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">VO2max (Medido)</div>
        <div class="metric-value" style="color: #d29922;">38.9</div>
        <div class="metric-detail">Bueno</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">TSB Actual</div>
        <div class="metric-value" style="color: #d29922;">-14.8</div>
        <div class="metric-detail">Neutral</div>
        <div class="metric-detail" style="font-size: 0.8em; color: #8b949e;">CTL: 17.3 | ATL: 32.1</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Sue√±o (7 d√≠as)</div>
        <div class="metric-value" style="color: #3fb950;">8.9h</div>
        <div class="metric-detail">√ìptimo</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">SpO2 (7 d√≠as)</div>
        <div class="metric-value" style="color: #3fb950;">98.0%</div>
        <div class="metric-detail">Normal</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Grasa Corporal</div>
        <div class="metric-value" style="color: #f85149;">22.8%</div>
        <div class="metric-detail">Alto</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Masa Muscular</div>
        <div class="metric-value" style="color: #d29922;">57.3 kg</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">FC Reposo (7d)</div>
        <div class="metric-value" style="color: #3fb950;">54 bpm</div>
        <div class="metric-detail">Excelente</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Pasos (7d)</div>
        <div class="metric-value" style="color: #3fb950;">14,378</div>
        <div class="metric-detail">Excelente</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Presi√≥n (7d)</div>
        <div class="metric-value" style="color: #3fb950;">112/72</div>
        <div class="metric-detail">Normal</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">ü©∏ Glucemia (7d)</div>
        <div class="metric-value" style="color: #3fb950; font-size: 1.5em;">95</div>
        <div class="metric-detail" style="color: #3fb950; font-weight: 600;">Ayunas: Normal</div>
        <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(139, 148, 158, 0.2);">
            <div class="metric-value" style="color: #3fb950; font-size: 1.3em;">110</div>
            <div class="metric-detail" style="color: #3fb950; font-weight: 600;">Postprandial: Normal</div>
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">üìà GMI Estimado (90d)</div>
        <div class="metric-value" style="color: #d29922;">5.7%</div>
        <div class="metric-detail" style="color: #d29922; font-weight: 600;">Prediabetes</div>
        <div class="metric-detail" style="font-size: 0.8em; color: #8b949e; margin-top: 5px;">
            Glucosa prom: 100 mg/dL
        </div>
        <div class="metric-detail" style="font-size: 0.75em; color: #8b949e;">
            ‚ö†Ô∏è 90 mediciones (estimaci√≥n aproximada)
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Score Longevidad</div>
        <div class="metric-value" style="color: #3fb950;">90/100</div>
        <div class="metric-detail">Excelente</div>
    </div>
    
            </div>
            
            <div class="charts-section">
                <h2>Evoluci√≥n Temporal</h2>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>PAI (Diario + Ventana M√≥vil 7 d√≠as)</h3>
                        <div id="pai-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Peso</h3>
                        <div id="peso-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>TSB + CTL + ATL</h3>
                        <div id="tsb-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>SpO2</h3>
                        <div id="spo2-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Grasa Corporal</h3>
                        <div id="grasa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa Muscular</h3>
                        <div id="masa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>FC en Reposo (Nocturna)</h3>
                        <div id="fc-reposo-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>FC Diurna (Continua)</h3>
                        <div id="fc-diurna-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Pasos Diarios</h3>
                        <div id="pasos-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Presi√≥n Arterial</h3>
                        <div id="presion-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Glucosa en Sangre</h3>
                        <div id="glucosa-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa √ìsea</h3>
                        <div id="masa-osea-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Masa de Agua Corporal</h3>
                        <div id="masa-agua-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Tasa Metab√≥lica Basal</h3>
                        <div id="tmb-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Distancia Recorrida</h3>
                        <div id="distancia-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Calor√≠as Totales</h3>
                        <div id="calorias-chart"></div>
                    </div>
                    <div class="chart-container">
                        <h3>Sue√±o por Fases (√∫ltimos 14 d√≠as)</h3>
                        <div id="sueno-chart"></div>
                    </div>
                </div>
            </div>
            
            
            <div class="nutrition-section">
                <h2>üçΩÔ∏è Nutrici√≥n y Balance Cal√≥rico</h2>
                
                <!-- Grid principal: C√≠rculo + Macros -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                    
                    <!-- C√çRCULO DE CALOR√çAS RESTANTES -->
                    <div class="nutrition-card" style="padding: 30px;">
                        <h3>üìä Ingesta de alimentos</h3>
                        <div style="position: relative; width: 200px; height: 200px; margin: 20px auto;">
                            <canvas id="circulo-calorias"></canvas>
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                <div id="restante-valor" style="font-size: 2.5em; font-weight: bold; color: #3fb950;">45.0</div>
                                <div style="font-size: 0.9em; color: #8b949e;">Restante</div>
                            </div>
                        </div>
                        
                        <!-- Informaci√≥n del d√≠a -->
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: #8b949e;">üçΩÔ∏è Comido</span>
                                <span id="comido-valor" style="color: #ff6384; font-weight: bold;">2230.0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span style="color: #8b949e;">üî• Ejercicio</span>
                                <span id="ejercicio-valor" style="color: #10b981; font-weight: bold;">549.0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid rgba(139, 148, 158, 0.2);">
                                <span style="color: #8b949e;">Meta de ingesta:</span>
                                <span id="presupuesto-valor" style="color: #58a6ff; font-weight: bold;">2275.0 kcal</span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 10px; background: rgba(139, 148, 158, 0.1); border-radius: 6px; text-align: center;">
                            <small style="color: #3fb950; font-weight: 600;">‚úÖ En d√©ficit: Perdiendo peso</small>
                        </div>
                    </div>
                    
                    <!-- MACROS EN PORCENTAJE -->
                    <div class="nutrition-card" style="padding: 30px;">
                        <h3>Macros</h3>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px;">
                            
                            <!-- Carbohidratos -->
                            <div style="text-align: center;">
                                <div style="position: relative; width: 100px; height: 100px; margin: 0 auto;">
                                    <canvas id="macro-carbohidratos"></canvas>
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                        <div id="carbohidratos-pct" style="font-size: 1.4em; font-weight: bold; color: #3b82f6;">29%</div>
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <div style="color: #8b949e; font-size: 0.85em;">üçû Carbohidrat...</div>
                                    <div id="carbohidratos-g" style="color: #c9d1d9; font-weight: bold;">160.9g</div>
                                </div>
                            </div>
                            
                            <!-- Prote√≠nas -->
                            <div style="text-align: center;">
                                <div style="position: relative; width: 100px; height: 100px; margin: 0 auto;">
                                    <canvas id="macro-proteinas"></canvas>
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                        <div id="proteinas-pct" style="font-size: 1.4em; font-weight: bold; color: #a855f7;">22%</div>
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <div style="color: #8b949e; font-size: 0.85em;">ü•© Prote√≠nas</div>
                                    <div id="proteinas-g" style="color: #c9d1d9; font-weight: bold;">122.6g</div>
                                </div>
                            </div>
                            
                            <!-- Grasas -->
                            <div style="text-align: center;">
                                <div style="position: relative; width: 100px; height: 100px; margin: 0 auto;">
                                    <canvas id="macro-grasas"></canvas>
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                        <div id="grasas-pct" style="font-size: 1.4em; font-weight: bold; color: #f59e0b;">49%</div>
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <div style="color: #8b949e; font-size: 0.85em;">ü•ë Grasas</div>
                                    <div id="grasas-g" style="color: #c9d1d9; font-weight: bold;">120.1g</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ‚úÖ NUEVO: COMPARACI√ìN RECOMENDADOS VS REAL -->
                <div class="nutrition-card" style="padding: 30px; margin-bottom: 30px;">
                    <h3 style="text-align: center; margin-bottom: 30px;">üìä Comparaci√≥n de Macronutrientes (promedio 7 d√≠as)</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                        
                        <!-- RECOMENDADOS -->
                        <div style="text-align: center;">
                            <div style="position: relative; width: 250px; height: 250px; margin: 0 auto;">
                                <canvas id="macros-recomendados"></canvas>
                            </div>
                            <div style="margin-top: 20px;">
                                <div style="font-size: 1.2em; font-weight: bold; color: #c9d1d9; margin-bottom: 10px;">Recomendados</div>
                                <div style="color: #8b949e; font-size: 0.9em;">
                                    <span style="color: #3b82f6;">‚¨§</span> Carb: <strong>55%</strong> &nbsp;
                                    <span style="color: #f59e0b;">‚¨§</span> Grasa: <strong>25%</strong> &nbsp;
                                    <span style="color: #a855f7;">‚¨§</span> Prote√≠na: <strong>20%</strong>
                                </div>
                            </div>
                        </div>
                        
                        <!-- REAL -->
                        <div style="text-align: center;">
                            <div style="position: relative; width: 250px; height: 250px; margin: 0 auto;">
                                <canvas id="macros-reales"></canvas>
                            </div>
                            <div style="margin-top: 20px;">
                                <div style="font-size: 1.2em; font-weight: bold; color: #c9d1d9; margin-bottom: 10px;">Real</div>
                                <div style="color: #8b949e; font-size: 0.9em;">
                                    <span style="color: #3b82f6;">‚¨§</span> Carb: <strong>40%</strong> (373.3g) &nbsp;
                                    <span style="color: #f59e0b;">‚¨§</span> Grasa: <strong>37%</strong> (153.7g) &nbsp;
                                    <span style="color: #a855f7;">‚¨§</span> Prote√≠na: <strong>22%</strong> (205.8g)
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <!-- GR√ÅFICO DE PRESUPUESTO Y CONSUMO -->
                <div class="chart-container">
                    <canvas id="presupuesto-consumo-chart" style="height: 350px;"></canvas>
                </div>
            </div>
    
            
            <div class="training-section">
                <h2>Entrenamientos Recientes</h2>
                
    <table>
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Duraci√≥n</th>
                <th>FC Prom</th>
                <th>PAI</th>
                <th>Zona</th>
            </tr>
        </thead>
        <tbody>
            
        <tr>
            <td>19/11 20:02</td>
            <td>Walking</td>
            <td>5 min</td>
            <td>104</td>
            <td style="color: #f85149; font-weight: bold;">1.3</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>19/11 19:17</td>
            <td>Walking</td>
            <td>39 min</td>
            <td>89</td>
            <td style="color: #f85149; font-weight: bold;">4.8</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        <tr>
            <td>19/11 19:02</td>
            <td>Press Banca</td>
            <td>12 min</td>
            <td>83</td>
            <td style="color: #f85149; font-weight: bold;">1.0</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        <tr>
            <td>19/11 18:55</td>
            <td>Aparatos de Musculaci√≥n</td>
            <td>3 min</td>
            <td>81</td>
            <td style="color: #f85149; font-weight: bold;">0.2</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        <tr>
            <td>19/11 18:19</td>
            <td>Walking</td>
            <td>35 min</td>
            <td>90</td>
            <td style="color: #f85149; font-weight: bold;">4.6</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        <tr>
            <td>18/11 19:16</td>
            <td>Walking</td>
            <td>26 min</td>
            <td>97</td>
            <td style="color: #f85149; font-weight: bold;">4.9</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>18/11 19:06</td>
            <td>Aparatos de Musculaci√≥n</td>
            <td>5 min</td>
            <td>102</td>
            <td style="color: #f85149; font-weight: bold;">1.2</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>18/11 18:53</td>
            <td>Press Banca</td>
            <td>8 min</td>
            <td>91</td>
            <td style="color: #f85149; font-weight: bold;">1.1</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        <tr>
            <td>18/11 18:46</td>
            <td>Aparatos de Musculaci√≥n</td>
            <td>5 min</td>
            <td>96</td>
            <td style="color: #f85149; font-weight: bold;">0.9</td>
            <td>Aer√≥bico</td>
        </tr>
        
        <tr>
            <td>18/11 18:36</td>
            <td>Press Banca</td>
            <td>8 min</td>
            <td>89</td>
            <td style="color: #f85149; font-weight: bold;">1.0</td>
            <td>Recuperaci√≥n</td>
        </tr>
        
        </tbody>
    </table>
    
            </div>
            
            <div class="recommendations-section">
                <h2>Recomendaciones</h2>
                
    <ul class="recommendations-list">
        <li>üéâ ¬°Excelente! Mant√©n tu rutina actual</li>
    </ul>
    
            </div>
            
            
    <div class="logs-section">
        <h2>üìã √öltima Ejecuci√≥n</h2>
        <div class="logs-summary">
            <p>‚úÖ <strong>Fecha:</strong> 2025-11-19 21:46:36 (ARG)</p>
            <p>‚úÖ <strong>Archivos procesados:</strong> 0</p>
            <p>‚úÖ <strong>Total ejercicios:</strong> 115</p>
            <p>‚úÖ <strong>Total registros peso:</strong> 44</p>
            <p>‚úÖ <strong>Total registros pasos:</strong> 688</p>
            <p style='color: #8b949e; font-size: 0.9em;'>üìÑ Log file: 5418 bytes</p>
            <button id="logs-toggle-btn" class="logs-toggle-btn" onclick="toggleLogs()">‚ñº Ver logs completos (√∫ltimas 500 l√≠neas)</button>
        </div>
        <pre id="logs-content" class="logs-hidden">2025-11-19 21:46:36,190 [INFO] - 
2025-11-19 21:46:36,190 [INFO] - ================================================================================
2025-11-19 21:46:36,190 [INFO] - MONITOR DE LONGEVIDAD v4.0 - SIN LOOP DE CRON
2025-11-19 21:46:36,190 [INFO] - ================================================================================
2025-11-19 21:46:36,190 [INFO] - Configuraci√≥n: SIN LIMPIEZA - datos limpios desde origen
2025-11-19 21:46:36,190 [INFO] - Ejecuci√≥n: Un ciclo, controlado por Crontab de Ubuntu.
2025-11-19 21:46:36,190 [INFO] - ================================================================================
2025-11-19 21:46:36,191 [INFO] - 
2025-11-19 21:46:36,191 [INFO] - ================================================================================
2025-11-19 21:46:36,191 [INFO] - PROCESAMIENTO - Monitor de Longevidad v4.0 [REPORTE POR FUENTE]
2025-11-19 21:46:36,191 [INFO] - ================================================================================
2025-11-19 21:46:36,218 [INFO] - Cache cargado: /home/ubuntu/proyecto/cache_datos.json
2025-11-19 21:46:36,226 [INFO] - Total archivos JSON encontrados: 790
2025-11-19 21:46:36,226 [INFO] - Archivos ya procesados: 794
2025-11-19 21:46:36,226 [INFO] - Archivos nuevos a procesar: 0
2025-11-19 21:46:36,226 [INFO] - No hay archivos nuevos para procesar.
2025-11-19 21:46:36,226 [INFO] - Generando dashboard HTML con gr√°ficos...
2025-11-19 21:46:36,226 [INFO] - ==================================================
2025-11-19 21:46:36,226 [INFO] - C√ÅLCULO PAI SEMANAL - Fecha actual: 2025-11-19
2025-11-19 21:46:36,226 [INFO] - Ventana de 7 d√≠as: 2025-11-13 a 2025-11-19
2025-11-19 21:46:36,226 [INFO] - PAI TOTAL SEMANAL: 136.9
2025-11-19 21:46:36,226 [INFO] - Entrenamientos en ventana: 32
2025-11-19 21:46:36,226 [INFO] - ==================================================
2025-11-19 21:46:36,227 [INFO] - üîç DEBUG Masa Muscular: masa_muscular_actual = 57.29
2025-11-19 21:46:36,227 [INFO] -    √öltimo registro: {&#x27;record_id&#x27;: &#x27;28a2c58a-a930-39ed-8692-52c56784f8a8&#x27;, &#x27;timestamp&#x27;: &#x27;2025-11-19T05:37:03-03:00&#x27;, &#x27;fecha&#x27;: &#x27;2025-11-19T05:37:03-03:00&#x27;, &#x27;masa_kg&#x27;: 57.29, &#x27;fuente&#x27;: &#x27;com.withings.wiscale2&#x27;}
2025-11-19 21:46:36,227 [INFO] - üö∂ DEBUG Pasos: Total registros en cache: 688
2025-11-19 21:46:36,231 [INFO] - üìä Pasos por d√≠a (√∫ltimos 7 D√çAS - M√ÅXIMO del d√≠a):
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-13: 9,917 pasos (de 24 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-14: 18,593 pasos (de 30 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-15: 22,482 pasos (de 28 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-16: 10,499 pasos (de 26 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-17: 12,000 pasos (de 23 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-18: 14,469 pasos (de 30 registros)
2025-11-19 21:46:36,231 [INFO] -    - 2025-11-19: 12,684 pasos (de 26 registros)
2025-11-19 21:46:36,231 [INFO] - üìà Pasos promedio calculado: 14,378 pasos/d√≠a (√∫ltimos 7 d√≠as)
2025-11-19 21:46:36,231 [INFO] - ü©∏ Glucemia (√∫ltimos 7 d√≠as):
2025-11-19 21:46:36,231 [INFO] -    - Ayunas: 11 mediciones, promedio: 95.4 mg/dL
2025-11-19 21:46:36,231 [INFO] -    - Postprandial: 2 mediciones, promedio: 109.9 mg/dL
2025-11-19 21:46:36,232 [INFO] - üìà GMI Estimado (√∫ltimos 90 d√≠as):
2025-11-19 21:46:36,232 [INFO] -    - Mediciones: 90
2025-11-19 21:46:36,232 [INFO] -    - Glucosa promedio: 99.9 mg/dL
2025-11-19 21:46:36,232 [INFO] -    - GMI: 5.7%
2025-11-19 21:46:36,288 [INFO] - Laboratorio procesado: Longevity Score = 85.5/100
2025-11-19 21:46:36,330 [INFO] - üîç Calculando c√≠rculo para HOY: 2025-11-19
2025-11-19 21:46:36,330 [INFO] - üìä Total registros de nutrition en cache: 581
2025-11-19 21:46:36,333 [INFO] - ‚úÖ Registros de nutrition HOY: 14, Calor√≠as: 2230.0
2025-11-19 21:46:36,382 [INFO] - ‚úÖ TMB HOY: 1726.0 kcal
2025-11-19 21:46:36,385 [INFO] - ‚úÖ Ejercicio HOY: 549.0 kcal
2025-11-19 21:46:36,385 [INFO] - üìà RESULTADO: Presupuesto=2275.0, Comido=2230.0, Restante=45.0
2025-11-19 21:46:36,388 [INFO] - Intentando generar plan de acci√≥n...
============================================================
üéØ GENERANDO PLAN DE ACCI√ìN - ADHERENCIA 7 D√çAS
============================================================
üìä Datos de d√©ficit (7 d√≠as): 7 d√≠as
   D√©ficits: [-1955.0, -450.0, -2379.0, -3268.0, 34.0, 253.0, 45.0]
‚úÖ Adherencia d√©ficit: 3/7 d√≠as (43%)
üìä Total registros nutrition_data: 581
üìä D√≠as con datos de prote√≠na: [&#x27;2025-11-07&#x27;, &#x27;2025-11-08&#x27;, &#x27;2025-11-10&#x27;, &#x27;2025-11-11&#x27;, &#x27;2025-11-12&#x27;, &#x27;2025-11-13&#x27;, &#x27;2025-11-14&#x27;, &#x27;2025-11-15&#x27;, &#x27;2025-11-16&#x27;, &#x27;2025-11-03&#x27;]
   2025-11-19: 123g ‚ùå
   2025-11-18: 128g ‚ùå
   2025-11-17: 97g ‚ùå
   2025-11-16: 301g ‚úÖ
   2025-11-15: 309g ‚úÖ
   2025-11-14: 277g ‚úÖ
   2025-11-13: 206g ‚úÖ
ü•© Adherencia prote√≠na: 4/7 d√≠as (57%)
‚öñÔ∏è  Peso inicial: 83.0kg
‚öñÔ∏è  Peso actual: 81.3kg
‚öñÔ∏è  Peso hace 7 d√≠as: 81.5kg
‚öñÔ∏è  Peso meta: 79.0kg
üìä Progreso total: 42.5% (1.7kg perdidos, faltan 2.3kg)
üîÆ C√°lculo kg/semana: 81.5kg (hace 7d) - 81.3kg (hoy) = 0.20 kg/semana
üîÆ Predicci√≥n: 0.20 kg/semana ‚Üí 2 meses y 3 semanas para llegar a meta
============================================================
2025-11-19 21:46:36,398 [INFO] - Plan de acci√≥n generado correctamente
2025-11-19 21:46:36,398 [INFO] - HTML del plan renderizado correctamente
</pre>
    </div>
    
        </div>
        
        <script>
            
        const layout_config = {
            paper_bgcolor: '#0d1117',
            plot_bgcolor: '#161b22',
            font: { color: '#c9d1d9' },
            margin: { l: 40, r: 20, t: 20, b: 40 },
            showlegend: true,
            height: 300
        };
    
        // PAI: Diario + Ventana M√≥vil 7 d√≠as
        const pai_diario = {
            x: ['2025-10-21', '2025-10-22', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [9.7, 45.49999999999999, 24.4, 5.6000000000000005, 23.8, 22.6, 80.3, 119.1, 84.9, 60.5, 0.0, 3.3, 10.2, 70.9, 49.5, 61.2, 57.0, 5.8, 20.2, 41.1, 16.8, 25.599999999999998, 15.5, 11.9],
            type: 'bar',
            name: 'PAI Diario',
            marker: { color: '#58a6ff' }
        };
        
        const pai_ventana = {
            x: ['2025-10-21', '2025-10-22', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [9.7, 55.19999999999999, 79.6, 85.19999999999999, 108.99999999999999, 131.6, 211.89999999999998, 321.29999999999995, 360.69999999999993, 396.8, 391.20000000000005, 370.7, 358.29999999999995, 348.9, 279.3, 255.60000000000002, 252.10000000000002, 257.90000000000003, 274.8, 305.70000000000005, 251.6, 227.7, 182.0, 136.89999999999998],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ventana 7d',
            line: { color: '#f85149', width: 3 },
            marker: { size: 8 },
            yaxis: 'y2'
        };
        
        Plotly.newPlot('pai-chart', [pai_diario, pai_ventana], {
            ...layout_config,
            yaxis: { title: 'PAI Diario', gridcolor: '#30363d' },
            yaxis2: {
                title: 'PAI Acumulado 7d',
                overlaying: 'y',
                side: 'right',
                gridcolor: '#30363d'
            },
            xaxis: { gridcolor: '#30363d' },
            shapes: [{
                type: 'line',
                x0: 0, x1: 1, xref: 'paper',
                yref: 'y2',
                y0: 100, y1: 100,
                line: { color: '#3fb950', width: 2, dash: 'dot' }
            }]
        });
        
        // TSB + CTL + ATL
        const tsb_data = {
            x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [-1.7, -9.1, -7.6, -6.3, -9.3, -8.7, -11.2, -9.2, -11.3, -15.7, -23.9, -27.2, -30.0, -24.6, -19.9, -15.9, -13.1, -11.9, -21.2, -16.8, -21.5, -27.4, -31.5, -26.1, -22.2, -22.2, -19.9, -19.5, -17.3, -14.8],
            type: 'scatter',
            mode: 'lines',
            name: 'TSB',
            fill: 'tozeroy',
            line: { color: '#ffa657', width: 2 }
        };
        
        const ctl_data = {
            x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [0.3, 1.9, 1.8, 1.8, 2.6, 2.7, 3.5, 3.4, 4.1, 5.3, 7.3, 8.7, 10.0, 9.8, 9.6, 9.3, 9.2, 9.4, 11.6, 11.3, 12.7, 14.5, 16.1, 15.9, 15.9, 16.5, 16.7, 17.2, 17.3, 17.3],
            type: 'scatter',
            mode: 'lines',
            name: 'CTL (Fitness)',
            line: { color: '#3fb950', width: 2 }
        };
        
        const atl_data = {
            x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [2.0, 11.0, 9.4, 8.1, 11.9, 11.4, 14.6, 12.5, 15.4, 21.0, 31.2, 35.9, 40.1, 34.4, 29.5, 25.2, 22.3, 21.2, 32.7, 28.1, 34.3, 41.9, 47.6, 42.0, 38.1, 38.7, 36.6, 36.6, 34.6, 32.1],
            type: 'scatter',
            mode: 'lines',
            name: 'ATL (Fatiga)',
            line: { color: '#f85149', width: 2 }
        };
        
        Plotly.newPlot('tsb-chart', [tsb_data, ctl_data, atl_data], {
            ...layout_config,
            yaxis: { title: 'Puntuaci√≥n', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Peso
        const peso_data = {
            x: ['2025-10-06', '2025-10-07', '2025-10-08', '2025-10-09', '2025-10-10', '2025-10-11', '2025-10-12', '2025-10-13', '2025-10-14', '2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [82.8, 82.9, 82.8, 82.36666666666666, 82.76666666666667, 82.875, 82.9, 83.3, 83.04, 82.925, 83.475, 83.5, 83.76666666666667, 83.85, 83.5, 83.045, 82.995, 82.6, 82.9, 83.12950000000001, 82.747, 82.5, 82.30000305175781, 82.19999694824219, 82.2, 82.0999984741211, 82.0999984741211, 82.5, 82.3, 82.8, 82.3, 81.69999694824219, 81.0999984741211, 81.5, 82.0, 81.69999694824219, 81.4000015258789, 81.4000015258789, 81.5, 81.19999694824219, 80.4000015258789, 79.80000305175781, 80.30000305175781, 81.30000305175781],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#f85149', width: 2 },
            marker: { size: 6 }
        };
        
        Plotly.newPlot('peso-chart', [peso_data], {
            ...layout_config,
            yaxis: { title: 'Peso (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            shapes: [{
                type: 'line',
                x0: 0, x1: 1, xref: 'paper',
                y0: 79.0, y1: 79.0,
                line: { color: '#3fb950', width: 1, dash: 'dot' }
            }]
        });
        
        // Grasa Corporal
        Plotly.newPlot('grasa-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [25.421043598325458, 25.78375895451578, 25.002245577135444, 25.07642168446598, 25.035007076778644, 26.716117500220786, 25.003249645233154, 24.755749702453613, 25.317000071207683, 25.278804779052734, 25.10425043106079, 25.279499530792236, 25.473249435424805, 25.058000087738037, 23.821499824523926, 24.15025043487549, 24.41325044631958, 24.153499921162922, 23.239832741873606, 23.265392303466797, 24.406907653808595, 23.752309036254882, 25.078816223144532, 23.899999618530273, 24.791939735412598, 24.134822845458984, 24.580207109451294, 24.168437321980793, 24.700910568237305, 24.383413314819336, 24.080561637878418, 24.94297754764557, 23.938447189331054, 23.733332951863606, 22.799999237060547],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#ffa657', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'Grasa (%)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Masa Muscular
        Plotly.newPlot('masa-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [58.700000610351566, 60.47079968261719, 61.33238723754883, 60.670670694204475, 60.39400213623047, 57.861500091552735, 59.40728546142578, 58.69074974060058, 58.53666656494141, 58.979431217738565, 57.82724975585938, 57.56350032806397, 57.705250167846685, 58.15900020599365, 58.17999977111816, 57.87824996948242, 57.956500434875494, 57.37483304341634, 63.05499267578125, 62.865318298339844, 59.42534118652344, 58.47327246093751, 57.53823803710937, 58.77428031921387, 59.34963354492188, 58.66626196289062, 58.9295817396376, 58.80321509467231, 58.28217897687639, 58.51846687316895, 57.76435952504476, 59.306309356689454, 56.5, 57.29],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#3fb950', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Masa √ìsea
        Plotly.newPlot('masa-osea-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [3.8066665363311767, 3.78666662534078, 3.6449999046325683, 3.656666634877523, 3.8700001271565756, 3.6049999046325683, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.25, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.300000190734863, 4.300000190734863, 4.199999809265137, 4.300000190734863, 4.199999809265137, 4.099999904632568, 4.199999809265137, 4.199999809265137, 4.099999904632568, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.199999809265137, 4.066666603088379, 4.049999952316284, 4.133333206176758, 4.199999809265137],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#79c0ff', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Masa de Agua Corporal
        Plotly.newPlot('masa-agua-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17'],
            y: [41.43999931335449, 40.59000007629395, 43.60587031046549, 43.55915944026067, 42.82827850341797, 41.32500025431315, 42.344285387311665, 41.94499992370606, 41.5999994913737, 42.134392024448935, 41.409999961853025, 41.22000030517578, 41.25, 41.4900004196167, 41.48999994277954, 41.310000343322756, 41.349999618530276, 41.18999977111816, 46.30889129638672, 46.168888092041016, 42.67658987426758, 42.049100830078125, 41.35974682617187, 42.113602294921876, 44.174909591674805, 43.363861083984375, 43.07668813069662, 42.438062032063804, 42.155531565348305, 42.83599662780762, 42.18727779388428, 43.787618001302086],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#58a6ff', width: 2 },
            fill: 'tozeroy',
            fillcolor: 'rgba(88, 166, 255, 0.1)'
        }], {
            ...layout_config,
            yaxis: { title: 'Masa (kg)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // FC Reposo
        Plotly.newPlot('fc-reposo-chart', [{
            x: ['2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [58.5, 57.142857142857146, 56.392857142857146, 56.0, 50.869565217391305, 53.78125, 58.48571428571429, 51.9, 51.18518518518518, 55.23076923076923, 62.16, 55.88461538461539, 56.07142857142857, 53.282051282051285, 55.38235294117647, 53.6, 49.875, 52.96774193548387, 52.607142857142854, 55.7, 56.388888888888886, 54.03703703703704, 54.142857142857146, 50.75, 52.18181818181818, 54.611111111111114, 54.875, 52.666666666666664, 53.0, 51.666666666666664, 52.666666666666664],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#f85149', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'FC (bpm)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Frecuencia Card√≠aca Diurna
        Plotly.newPlot('fc-diurna-chart', [
            {
                x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [53, 53, 52, 49, 47, 52, 48, 48, 47, 50, 50, 49, 48, 48, 47, 45, 48, 46, 53, 53, 47, 52, 43, 49, 50, 52, 49, 53, 49, 48],
                type: 'scatter',
                mode: 'lines',
                name: 'M√≠nima',
                line: { color: '#58a6ff', width: 1 },
                fill: 'tonexty'
            },
            {
                x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [80.10884353741496, 75.21200980392156, 75.72, 60.138596491228064, 74.80351473922903, 68.0228601807549, 63.336604774535814, 59.021978021978015, 76.33333333333333, 75.99140211640211, 84.32539682539684, 73.48961840628509, 72.21884615384616, 66.38509529685999, 62.59027432712217, 60.509504132231406, 66.3928717948718, 71.78675213675214, 97.33208020050127, 70.51570048309178, 79.97970679012346, 75.61274509803923, 80.6758658008658, 68.46942355889723, 72.7932098765432, 79.85187074829932, 76.38881578947368, 74.6190476190476, 74.52833333333334, 70.16666666666667],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Promedio',
                line: { color: '#ffa657', width: 2 }
            },
            {
                x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [132, 143, 133, 96, 156, 101, 117, 100, 156, 151, 143, 142, 122, 106, 106, 101, 118, 121, 160, 116, 151, 152, 146, 104, 121, 150, 159, 146, 120, 110],
                type: 'scatter',
                mode: 'lines',
                name: 'M√°xima',
                line: { color: '#f85149', width: 1 },
                fill: 'tonexty'
            }
        ], {
            ...layout_config,
            yaxis: { title: 'FC (bpm)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Presi√≥n Arterial
        Plotly.newPlot('presion-chart', [
            {
                x: ['2025-10-14', '2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [121.0, 120.5, 112.0, 113.66666666666667, 118.14285714285714, 123.33333333333333, 116.0, 121.55555555555556, 113.5, 114.0, 110.21739130434783, 114.42857142857143, 118.61538461538461, 121.8, 122.0, 116.2, 116.6, 114.0, 116.1025641025641, 114.43478260869566, 113.77777777777777, 117.4, 114.375, 113.875, 117.2, 115.0, 119.5, 112.0, 118.0, 115.6, 108.0, 111.0, 113.71428571428571, 104.0, 111.0, 115.0],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Sist√≥lica',
                line: { color: '#f85149', width: 2 }
            },
            {
                x: ['2025-10-14', '2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [82.0, 81.25, 76.0, 75.66666666666667, 79.85714285714286, 83.0, 79.0, 81.0, 74.5, 73.2, 72.04347826086956, 74.42857142857143, 76.6923076923077, 76.6, 80.0, 72.7, 73.7, 74.1, 73.84615384615384, 73.66666666666667, 71.44444444444444, 74.4, 74.125, 75.375, 77.4, 70.0, 76.0, 76.0, 70.0, 74.0, 70.25, 73.0, 73.0, 70.0, 67.0, 76.0],
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Diast√≥lica',
                line: { color: '#58a6ff', width: 2 }
            }
        ], {
            ...layout_config,
            yaxis: { title: 'mmHg', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // SpO2
        Plotly.newPlot('spo2-chart', [{
            x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-18', '2025-11-19'],
            y: [97.33333333333333, 97.66666666666667, 99.0, 97.5, 98.0, 97.42857142857143, 98.2, 97.0, 97.0, 96.18181818181819, 96.25, 97.0, 96.85714285714286, 98.06896551724138, 98.0, 99.07142857142857, 98.75, 96.25, 94.0, 97.85714285714286, 98.33333333333333, 98.33333333333333, 97.0, 98.0, 98.0, 97.6, 99.0, 97.0],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#79c0ff', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'SpO2 (%)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Pasos
        Plotly.newPlot('pasos-chart', [{
            x: ['2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [20041, 24980, 21655, 4061, 12708, 9892, 8840, 3229, 12828, 15056, 22086, 21126, 12428, 5480, 3287, 3633, 11454, 11101, 20998, 8694, 21074, 20128, 19151, 9917, 18593, 22482, 10499, 12000, 14469, 12684],
            type: 'bar',
            marker: { color: '#58a6ff' }
        }], {
            ...layout_config,
            yaxis: { title: 'Pasos', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Distancia Recorrida
        Plotly.newPlot('distancia-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [2.26, 10.91, 19.32, 1.46, 3.68, 40.43, 80.96000000000001, 28.08, 4.7700000000000005, 24.200000000000003, 14.89, 12.450000000000001, 36.24, 20.08, 27.96, 29.340000000000003, 24.93, 3.6, 1.98, 3.38, 12.780000000000001, 12.59, 10.59, 10.64, 3.54, 5.72, 18.32, 5.34, 2.7, 5.24, 6.29],
            type: 'bar',
            marker: { 
                color: '#58a6ff',
                line: { color: '#1f6feb', width: 1 }
            }
        }], {
            ...layout_config,
            yaxis: { title: 'Distancia (km)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Calor√≠as Totales
        Plotly.newPlot('calorias-chart', [{
            x: ['2025-10-02', '2025-10-03', '2025-10-04', '2025-10-05', '2025-10-06', '2025-10-07', '2025-10-08', '2025-10-09', '2025-10-10', '2025-10-11', '2025-10-12', '2025-10-13', '2025-10-14', '2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-25', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [17.0, 2091.0, 8701.0, 9744.0, 11087.0, 11417.0, 11403.0, 11368.0, 11396.0, 11410.0, 11424.0, 10447.0, 10010.0, 11914.0, 12758.0, 11874.0, 15574.0, 13270.0, 14028.0, 16453.0, 17090.0, 15438.0, 9635.0, 8850.0, 8898.0, 8441.0, 6500.0, 7187.0, 7793.0, 8795.0, 8810.0, 3031.0, 1625.0, 1624.0, 1863.0, 2592.0, 1608.0, 1528.0, 404.0, 2622.0, 2516.0, 2362.0, 1820.0, 1503.0, 1027.0, 407.0, 530.0, 581.0, 549.0],
            type: 'bar',
            marker: { 
                color: '#ffa657',
                line: { color: '#d4a72c', width: 1 }
            }
        }], {
            ...layout_config,
            yaxis: { title: 'Calor√≠as (kcal)', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Glucosa en Sangre
        Plotly.newPlot('glucosa-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [99.56666666666668, 98.4, 98.9, 101.9, 106.9, 101.9, 99.90000000000002, 96.9, 103.9, 92.90000000000002, 92.90000000000002, 93.90000000000002, 105.90000000000002, 99.90000000000002, 97.9, 95.90000000000002, 116.06666666666666, 97.90000000000002, 101.90000000000002, 106.90000000000002, 100.90000000000002, 92.90000000000002, 101.89999999999999, 87.90000000000002, 89.9, 95.9, 93.9, 102.23333333333335, 89.9, 119.9, 96.4],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#d29922', width: 2 },
            marker: { size: 8 }
        }], {
            ...layout_config,
            yaxis: { title: 'mg/dL', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            shapes: [
                {
                    type: 'rect',
                    xref: 'paper',
                    x0: 0, x1: 1,
                    y0: 70, y1: 100,
                    fillcolor: '#3fb950',
                    opacity: 0.1,
                    line: { width: 0 }
                }
            ]
        });
        
        // Tasa Metab√≥lica Basal
        Plotly.newPlot('tmb-chart', [{
            x: ['2025-10-15', '2025-10-16', '2025-10-17', '2025-10-18', '2025-10-19', '2025-10-20', '2025-10-21', '2025-10-22', '2025-10-23', '2025-10-24', '2025-10-26', '2025-10-27', '2025-10-28', '2025-10-29', '2025-10-30', '2025-10-31', '2025-11-01', '2025-11-02', '2025-11-03', '2025-11-04', '2025-11-05', '2025-11-06', '2025-11-07', '2025-11-08', '2025-11-09', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
            y: [1723.25, 1730.75, 1729.0, 1736.1666666666667, 1749.857142857143, 1735.0, 1726.0, 1728.0, 1715.0, 1713.4285714285713, 1728.0, 1717.0, 1709.0, 1713.0, 1738.0, 1732.0, 1724.0, 1726.0, 1737.0, 1733.0, 1732.0, 1742.0, 1703.0, 1702.0, 1707.3333333333333, 1724.25, 1704.4285714285713, 1712.75, 1699.0, 1712.2, 1716.6666666666667, 1672.5714285714287, 1698.5, 1699.3333333333333, 1726.0],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#ffa657', width: 2 }
        }], {
            ...layout_config,
            yaxis: { title: 'kcal/d√≠a', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' }
        });
        
        // Gr√°fico de Sue√±o - Barras Apiladas
        Plotly.newPlot('sueno-chart', [
            {
                x: ['2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [0.975, 0.08333333333333334, 0.025, 0.8666666666666667, 0.5333333333333333, 1.6083333333333334, 1.1083333333333334, 1.6166666666666667, 1.0833333333333333, 1.4333333333333333, 0.0, 0.0, 2.0583333333333336],
                name: 'Profundo',
                type: 'bar',
                marker: { color: '#1f6feb' }
            },
            {
                x: ['2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [3.7666666666666666, 6.333333333333334, 1.1583333333333334, 8.258333333333333, 9.541666666666666, 3.7, 3.7333333333333334, 9.425, 2.025, 3.2583333333333333, 0.0, 0.0, 9.8],
                name: 'Ligero',
                type: 'bar',
                marker: { color: '#d29922' }
            },
            {
                x: ['2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [1.7, 0.4583333333333333, 0.025, 3.35, 1.8166666666666667, 1.25, 1.8166666666666667, 0.7333333333333333, 0.625, 0.725, 0.0, 0.0, 1.6833333333333333],
                name: 'REM',
                type: 'bar',
                marker: { color: '#8957e5' }
            },
            {
                x: ['2025-11-06', '2025-11-07', '2025-11-08', '2025-11-10', '2025-11-11', '2025-11-12', '2025-11-13', '2025-11-14', '2025-11-15', '2025-11-16', '2025-11-17', '2025-11-18', '2025-11-19'],
                y: [0.9583333333333333, 0.7333333333333333, 0.09166666666666666, 0.8416666666666666, 1.3416666666666668, 1.0916666666666666, 1.075, 1.9916666666666665, 0.7, 0.9833333333333333, 0.0, 0.0, 2.158333333333333],
                name: 'Despierto',
                type: 'bar',
                marker: { color: '#f85149' }
            }
        ], {
            ...layout_config,
            barmode: 'stack',
            yaxis: { title: 'Horas', gridcolor: '#30363d' },
            xaxis: { gridcolor: '#30363d' },
            showlegend: true,
            legend: { 
                orientation: 'h',
                yanchor: 'bottom',
                y: 1.02,
                xanchor: 'right',
                x: 1,
                bgcolor: 'rgba(22, 27, 34, 0.8)'
            }
        });
        
    
    // FUNCIONES PARA LOGS
    function toggleLogs() {
        const logsContent = document.getElementById('logs-content');
        const toggleBtn = document.getElementById('logs-toggle-btn');
        
        if (logsContent.classList.contains('logs-hidden')) {
            logsContent.classList.remove('logs-hidden');
            toggleBtn.textContent = '‚ñ≤ Ocultar logs';
            toggleBtn.classList.add('expanded');
        } else {
            logsContent.classList.add('logs-hidden');
            toggleBtn.textContent = '‚ñº Ver logs completos (√∫ltimas 500 l√≠neas)';
            toggleBtn.classList.remove('expanded');
        }
    }
    
    function formatearLogs() {
        const logsContent = document.getElementById('logs-content');
        if (!logsContent) return;
        
        let html = logsContent.innerHTML;
        
        // Colorear seg√∫n nivel de log
        html = html.replace(/\[INFO\]/g, '<span class="log-info">[INFO]</span>');
        html = html.replace(/\[WARNING\]/g, '<span class="log-warning">[WARNING]</span>');
        html = html.replace(/\[ERROR\]/g, '<span class="log-error">[ERROR]</span>');
        html = html.replace(/‚úÖ/g, '<span class="log-success">‚úÖ</span>');
        html = html.replace(/‚ùå/g, '<span class="log-error">‚ùå</span>');
        html = html.replace(/‚ö†Ô∏è/g, '<span class="log-warning">‚ö†Ô∏è</span>');
        
        logsContent.innerHTML = html;
    }
    
    // Ejecutar al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', formatearLogs);
    
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // C√çRCULO DE CALOR√çAS RESTANTES - D√≠a actual
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const circuloData = {
            presupuesto: 2275.0,
            comido: 2230.0,
            ejercicio: 549.0,
            restante: 45.0
        };
        
        new Chart(document.getElementById('circulo-calorias'), {
            type: 'doughnut',
            data: {
                labels: ['Comido', 'Restante'],
                datasets: [{
                    data: [2230.0, 45.0],
                    backgroundColor: ['#ff6384', '#3fb950'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%',
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: false }
                }
            }
        });
        
        // Actualizar valores en el HTML
        document.getElementById('restante-valor').textContent = Math.abs(45.0);
        document.getElementById('restante-valor').style.color = '#3fb950';
        document.getElementById('comido-valor').textContent = 2230.0;
        document.getElementById('ejercicio-valor').textContent = 549.0;
        document.getElementById('presupuesto-valor').textContent = 2275.0;
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // MACROS EN PORCENTAJE - 3 c√≠rculos
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // Prote√≠nas
        new Chart(document.getElementById('macro-proteinas'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [22, 78],
                    backgroundColor: ['#a855f7', 'rgba(168, 85, 247, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        document.getElementById('proteinas-pct').textContent = '22%';
        document.getElementById('proteinas-g').textContent = '122.6g';
        
        // Carbohidratos
        new Chart(document.getElementById('macro-carbohidratos'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [29, 71],
                    backgroundColor: ['#3b82f6', 'rgba(59, 130, 246, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        document.getElementById('carbohidratos-pct').textContent = '29%';
        document.getElementById('carbohidratos-g').textContent = '160.9g';
        
        // Grasas
        new Chart(document.getElementById('macro-grasas'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [49, 51],
                    backgroundColor: ['#f59e0b', 'rgba(245, 158, 11, 0.1)'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });
        document.getElementById('grasas-pct').textContent = '49%';
        document.getElementById('grasas-g').textContent = '120.1g';
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GR√ÅFICOS COMPARACI√ìN MACROS - Recomendados vs Real
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // RECOMENDADOS
        new Chart(document.getElementById('macros-recomendados'), {
            type: 'pie',
            data: {
                labels: ['Carbohidratos', 'Grasas', 'Prote√≠nas'],
                datasets: [{
                    data: [55, 25, 20],
                    backgroundColor: ['#3b82f6', '#f59e0b', '#a855f7'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        enabled: true,
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // REALES (√∫ltimos 7 d√≠as)
        new Chart(document.getElementById('macros-reales'), {
            type: 'pie',
            data: {
                labels: ['Carbohidratos', 'Grasas', 'Prote√≠nas'],
                datasets: [{
                    data: [40, 37, 22],
                    backgroundColor: ['#3b82f6', '#f59e0b', '#a855f7'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        enabled: true,
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GR√ÅFICO PRESUPUESTO Y CONSUMO - 14 d√≠as
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        new Chart(document.getElementById('presupuesto-consumo-chart'), {
            type: 'line',
            data: {
                labels: ["2025-11-06", "2025-11-07", "2025-11-08", "2025-11-09", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-15", "2025-11-16", "2025-11-17", "2025-11-18", "2025-11-19"],
                datasets: [
                    {
                        label: 'Presupuesto',
                        data: [4331.0, 3269.0, 3230.0, 2108.0, 4368.0, 4223.0, 4086.0, 3477.0, 3176.0, 2721.0, 2070.0, 2271.0, 2296.0, 2275.0],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'Comido',
                        data: [954.0, 6210.0, 6616.0, 3302.0, 4980.0, 9792.0, 7101.0, 5432.0, 3626.0, 5100.0, 5338.0, 2237.0, 2043.0, 2230.0],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'Ejercicio',
                        data: [2592.0, 1608.0, 1528.0, 404.0, 2622.0, 2516.0, 2362.0, 1820.0, 1503.0, 1027.0, 407.0, 530.0, 581.0, 549.0],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        display: true, 
                        position: 'bottom',
                        labels: { 
                            color: '#c9d1d9',
                            usePointStyle: true,
                            padding: 15,
                            font: { size: 12 }
                        }
                    },
                    title: { 
                        display: true, 
                        text: 'Presupuesto y Consumo', 
                        color: '#79c0ff', 
                        font: { size: 16 },
                        padding: 20
                    }
                },
                scales: {
                    x: { 
                        ticks: { color: '#8b949e' }, 
                        grid: { color: 'rgba(139, 148, 158, 0.1)' }
                    },
                    y: { 
                        ticks: { color: '#8b949e' }, 
                        grid: { color: 'rgba(139, 148, 158, 0.1)' },
                        title: { 
                            display: true, 
                            text: 'Calor√≠as (kcal)', 
                            color: '#8b949e' 
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false
                }
            }
        });
        
        </script>
    </body>
    </html>
    